<ПравилаОбмена>
	<ВерсияФормата РежимСовместимости="РежимСовместимостиСБСП20">2.01</ВерсияФормата>
	<Ид>5c2b854f-89f3-40ff-978f-3da66b1ae281    </Ид>
	<Наименование>МТО БСО исправленная</Наименование>
	<ДатаВремяСоздания>2025-08-28T19:06:03</ДатаВремяСоздания>
	<Источник ВерсияПлатформы="8.0" ВерсияКонфигурации="2.4.1.227" СинонимКонфигурации="1С:ERP Управление предприятием 2">УправлениеПредприятием</Источник>
	<Приемник ВерсияПлатформы="8.0" ВерсияКонфигурации="3.0.168.25" СинонимКонфигурации="1С:Бухгалтерия строительной организации КОРП, редакция 3.0">БухгалтерияСтроительнойОрганизацииКОРП</Приемник>
	<ПередЗагрузкойДанных>
// Таблица для сбора ошибок
ОписаниеТиповСтроки = Новый ОписаниеТипов("Строка");
ТаблицаОшибок = Новый ТаблицаЗначений;
ТаблицаОшибок.Колонки.Добавить("ТипОшибки"				, ОписаниеТиповСтроки); // Контрагент, Договор, Подразделение
ТаблицаОшибок.Колонки.Добавить("ОписаниеОшибки"			, ОписаниеТиповСтроки); // "Не найден по ИНН\КПП" и т.п.
ТаблицаОшибок.Колонки.Добавить("ОписаниеРеквизита"		, ОписаниеТиповСтроки); // Наим. контрагента
ТаблицаОшибок.Колонки.Добавить("КлючПоиска1"			, ОписаниеТиповСтроки); // ИНН\КПП (Наим.Договора)
ТаблицаОшибок.Колонки.Добавить("КлючПоиска2"			, ОписаниеТиповСтроки); // (ВидДоговора)
ТаблицаОшибок.Колонки.Добавить("КлючПоиска3"			, ОписаниеТиповСтроки); // (Контрагент для договора)
ТаблицаОшибок.Колонки.Добавить("Дополнение"				, ОписаниеТиповСтроки); // (Договор, если не найден контрагент)
ТаблицаОшибок.Колонки.Добавить("ДокументИсточник"		, ОписаниеТиповСтроки); // Номер дата источника
ТаблицаОшибок.Колонки.Добавить("ГУИДИсточника"		    , ОписаниеТиповСтроки); // ГУИД источника (для возврата незагруженных ссылок)
Параметры.Вставить("ТаблицаОшибок"				        , ТаблицаОшибок);

// таблица проведения
ТаблицаПроведения = Новый ТаблицаЗначений;
ТаблицаПроведения.Колонки.Добавить("Ссылка");
ТаблицаПроведения.Колонки.Добавить("Порядок");
Параметры.Вставить("ТаблицаПроведения"			, ТаблицаПроведения);
// ***

Параметры.Вставить("СохранитьОшибкиВФайл"				, Истина);
Параметры.Вставить("КаталогХранилища"					, "\\fs02-igs-msk1\1C_EXCH\BSO_MTO\TEST");
Параметры.Вставить("ПередатьОшибкиПоПочте"				, Истина);
Параметры.Вставить("ПочтовыйАдресПолучателяОшибок"		, "");</ПередЗагрузкойДанных>
	<ПослеЗагрузкиДанных>// Вывод отчета об ошибках загрузки
ЕстьОшибки = Параметры.ТаблицаОшибок.Количество() &gt; 0;
ОшибкиЗарегистрированы = Ложь;

// провести загруженные документы
Выполнить(Алгоритмы.ПровестиЗагруженныеДокументы);

Если ЕстьОшибки Тогда
	Выполнить(Алгоритмы.ВывестиОшибкиПриемника);
КонецЕсли;</ПослеЗагрузкиДанных>
	<ПередОтправкойИнформацииОбУдалении>Отказ = Истина;</ПередОтправкойИнформацииОбУдалении>
	<Параметры/>
	<Обработки/>
	<ПравилаКонвертацииОбъектов>
		<Группа>
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило>
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>Документ: Приобретение товаров и услуг</Наименование>
				<Порядок>50</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;    

Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.ЗакупкаЧерезПодотчетноеЛицо Тогда
	
	ВыгрузитьПоПравилу(Источник,Неопределено,Неопределено,Неопределено,"АвансовыйОтчет",,,);
	Отказ = Истина;
	
Иначе
	
	Запрос = Новый Запрос ("ВЫБРАТЬ
	|	ПриобретениеТоваровУслугТовары.ЗаказПоставщику КАК ЗаказПоставщику,
	|	ПриобретениеТоваровУслугТовары.Количество КАК Количество,
	|	ПриобретениеТоваровУслугТовары.Номенклатура КАК Номенклатура,
	|	ПриобретениеТоваровУслугТовары.Склад КАК Склад,
	|	ПриобретениеТоваровУслугТовары.Цена КАК Цена,
	|	ПриобретениеТоваровУслугТовары.Сумма КАК Сумма,
	|	ПриобретениеТоваровУслугТовары.игс_СчетУчета КАК СчетУчета,
	|	ПриобретениеТоваровУслугТовары.СтавкаНДС КАК СтавкаНДС,
	|	ПриобретениеТоваровУслугТовары.СуммаНДС КАК СуммаНДС,
	|	ПриобретениеТоваровУслугТовары.СА_Проект КАК игсСкважина,
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка) КАК игсСтатьяЗатрат,
	|	ПриобретениеТоваровУслугТовары.НомерСтроки КАК НомерСтроки,
	|	ПриобретениеТоваровУслугТовары.ИГС_Спецификация КАК ИГС_Спецификация, 
	|	ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ПустаяСсылка) КАК СчетЗатрат,  
	|	ЗНАЧЕНИЕ(ПланВидовХарактеристик.СтатьиРасходов.ПустаяСсылка) КАК Субконто1,    
	|	ЗНАЧЕНИЕ(Справочник.СтруктураПредприятия.ПустаяСсылка) КАК ПодразделениеЗатрат
	|ИЗ
	|	Документ.ПриобретениеТоваровУслуг.Товары КАК ПриобретениеТоваровУслугТовары
	|ГДЕ
	|	ПриобретениеТоваровУслугТовары.Номенклатура.ТипНоменклатуры = ЗНАЧЕНИЕ(Перечисление.ТипыНоменклатуры.Товар)
	|	И ПриобретениеТоваровУслугТовары.Ссылка = &amp;Ссылка");
	
	Запрос.УстановитьПараметр("Ссылка", Источник.Ссылка);
	
	РезультатЗапроса = Запрос.Выполнить().Выгрузить();
	
	ВходящиеДанные = Новый Структура();
	
	ВходящиеДанные.Вставить("Товары", 		РезультатЗапроса);
	ВходящиеДанные.Вставить("Оборудование", РезультатЗапроса);
	
	Для Каждого Строка Из ВходящиеДанные.Товары Цикл
		
		Пока ЗначениеЗаполнено(Строка.игсСкважина.Родитель.Родитель) Цикл
			Строка.игсСкважина = Строка.игсСкважина.Родитель;
		КонецЦикла;
		
		Если НЕ (ЗначениеЗаполнено(Строка.игсСкважина.Родитель)
			И НЕ ЗначениеЗаполнено(Строка.игсСкважина.Родитель.Родитель)
			И Строка.игсСкважина.Родитель.Наименование = "ПРОЕКТЫ"
			И Строка.игсСкважина.Наименование &lt;&gt; "яя_СТАРЫЕ_2014"
			И Строка.игсСкважина.Наименование &lt;&gt; "ПРОЧЕЕ"
			И Строка.игсСкважина.Наименование &lt;&gt; "Проект №1") Тогда
			
			Строка.игсСкважина = Неопределено;
			
		КонецЕсли;
		
		Запрос = Новый Запрос;		
		Запрос.УстановитьПараметр("Ссылка", 	 Источник.Ссылка);
		Запрос.УстановитьПараметр("НомерСтроки", Строка.НомерСтроки);
		
		Запрос.Текст = "ВЫБРАТЬ
		|	ПриобретениеТоваровУслугТовары.Ссылка КАК Ссылка,
		|	ПриобретениеТоваровУслугТовары.НомерСтроки КАК НомерСтроки,
		|	СА_ЗаявкаНаПоставкуМТРТовары.СтатьяЗатрат КАК СтатьяЗатрат
		|ИЗ
		|	Документ.ПриобретениеТоваровУслуг.Товары КАК ПриобретениеТоваровУслугТовары
		|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СА_ЗаявкаНаПоставкуМТР.Товары КАК СА_ЗаявкаНаПоставкуМТРТовары
		|		ПО (ПриобретениеТоваровУслугТовары.СА_ЗаявкаНаПоставкуМТР = СА_ЗаявкаНаПоставкуМТРТовары.Ссылка
		|				И ПриобретениеТоваровУслугТовары.ИГС_УникальныйНомерПозиции = СА_ЗаявкаНаПоставкуМТРТовары.ИГС_УникальныйНомерПозиции
		|				И СА_ЗаявкаНаПоставкуМТРТовары.Ссылка.Проведен)
		|ГДЕ
		|	ПриобретениеТоваровУслугТовары.Ссылка = &amp;Ссылка
		|	И ПриобретениеТоваровУслугТовары.НомерСтроки = &amp;НомерСтроки";
		
		Результат = Запрос.Выполнить();
		ВыборкаДетальныеЗаписи = Результат.Выбрать();
		
		Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
			Если ЗначениеЗаполнено(ВыборкаДетальныеЗаписи.СтатьяЗатрат) Тогда
				Строка.игсСтатьяЗатрат = ВыборкаДетальныеЗаписи.СтатьяЗатрат;
			КонецЕсли;
		КонецЦикла;
		
		Если Не ЗначениеЗаполнено(Строка.игсСтатьяЗатрат) И ЗначениеЗаполнено(Строка.ИГС_Спецификация) Тогда
			
			Запрос = Новый Запрос;
			
			Запрос.УстановитьПараметр("Ссылка", 	  Источник.Ссылка);
			Запрос.УстановитьПараметр("Номенклатура", Строка.Номенклатура);
			
			Запрос.Текст = 
			"ВЫБРАТЬ
			|	ПриобретениеТоваровУслугТовары.Ссылка КАК Ссылка,
			|	СА_СпецификацияТовары.СтатьяЗатрат КАК СтатьяЗатрат,
			|	ПриобретениеТоваровУслугТовары.НомерСтроки КАК НомерСтроки
			|ИЗ
			|	Документ.ПриобретениеТоваровУслуг.Товары КАК ПриобретениеТоваровУслугТовары
			|		ЛЕВОЕ СОЕДИНЕНИЕ Документ.СА_Спецификация.Товары КАК СА_СпецификацияТовары
			|		ПО (ПриобретениеТоваровУслугТовары.ИГС_Спецификация = СА_СпецификацияТовары.Ссылка
			|				И ПриобретениеТоваровУслугТовары.Номенклатура = СА_СпецификацияТовары.Номенклатура
			|				И СА_СпецификацияТовары.Ссылка.Проведен)
			|ГДЕ
			|	ПриобретениеТоваровУслугТовары.Ссылка = &amp;Ссылка
			|	И ПриобретениеТоваровУслугТовары.Номенклатура = &amp;Номенклатура";
			
			
			Результат = Запрос.Выполнить();
			ВыборкаДетальныеЗаписи = Результат.Выбрать();
			
			Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
				Если ЗначениеЗаполнено(ВыборкаДетальныеЗаписи.СтатьяЗатрат) Тогда
					Строка.игсСтатьяЗатрат = ВыборкаДетальныеЗаписи.СтатьяЗатрат;
				КонецЕсли;
			КонецЦикла;
			
		КонецЕсли;   
		
	КонецЦикла;
	
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

////////////////////////////////////////////////////////////////////////////////////

Если Не Отказ Тогда 
	ЭтоОригинал = ПараметрыОбъекта["НаличиеОригинала"];  
	ГУИД = ПараметрыОбъекта["ГУИД"];
	
	Документ = Объект.Ссылка;	
	Если Не ЗначениеЗаполнено(Документ) Тогда
		Документ = Документы.ПоступлениеТоваровУслуг.ПолучитьСсылку(ГУИД);  
		Объект.УстановитьСсылкуНового(Документ);
	КонецЕсли;
	
	Если ЭтоОригинал Тогда 
		ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Оригинал;
	Иначе
		ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Копия;
	КонецЕсли;  
	
	Выполнить(Алгоритмы.ЗаписьВРегистрУНЭПД); 
	
	
Статья25Счета = игсНастройкиМеханизмовПривилегированный.ПолучитьЗначениеНастройки(ПредопределенноеЗначение("ПланВидовХарактеристик.игсНастройкиМеханизмов.СтатьяМалоценки25"),Объект.Организация);  
Статья26Счета = игсНастройкиМеханизмовПривилегированный.ПолучитьЗначениеНастройки(ПредопределенноеЗначение("ПланВидовХарактеристик.игсНастройкиМеханизмов.СтатьяМалоценки26"),Объект.Организация); 
Счет25 = ПланыСчетов.Хозрасчетный.ОбщепроизводственныеРасходы; 
Счет26 = ПланыСчетов.Хозрасчетный.ОбщехозяйственныеРасходы;

//Малоценка
Для Каждого Строка Из Объект.Товары Цикл
	Если Строка.СчетУчета = ПланыСчетов.Хозрасчетный.ПриобретениеМалоценногоОборудованияИЗапасов Тогда	
		Если ЗначениеЗаполнено(Строка.игсСкважина)Тогда   
			Строка.СчетЗатрат = Счет25;
		Иначе
			Строка.СчетЗатрат = Счет26;    
		КонецЕсли;	
		Если ЗначениеЗаполнено(Строка.игсСтатьяЗатрат)Тогда   
			Строка.Субконто1 = Строка.игсСтатьяЗатрат;
		Иначе
			Если Строка.СчетЗатрат = Счет25 Тогда
				Строка.Субконто1 = Статья25Счета;
			Иначе 
				Строка.Субконто1 = Статья26Счета;
			КонецЕсли;
		КонецЕсли; 
		
		Строка.ПодразделениеЗатрат = Объект.ПодразделениеОрганизации;	
		
	КонецЕсли;	
КонецЦикла;
//Малоценка
	
	ТабЗначСчетаУчета = Объект.Товары.Выгрузить();
	СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);
		// ******************************************************
	Выполнить(Алгоритмы.ЗаписьДокументаПроведение);
	// ******************************************************
КонецЕсли;

Если Объект.Товары.Итог("СуммаНДС") &lt;&gt; 0 
	ИЛИ Объект.Оборудование.Итог("СуммаНДС") &lt;&gt; 0 Тогда
	
	// счет фактура 
	НомерСчетаФактуры = ПараметрыОбъекта["НомерСчетФактуры"]; 
	ДатаСчетаФактуры  = ПараметрыОбъекта["ДатаСчетФактуры"]; ;
	СчетФактура = УчетНДСПереопределяемый.НайтиПодчиненныйСчетФактуруВыданныйНаРеализацию(Объект.Ссылка);
	Если ЗначениеЗаполнено(СчетФактура) Тогда
		СчетФактура = СчетФактура.ПолучитьОбъект();		
	Иначе
		СчетФактура = Документы.СчетФактураПолученный.СоздатьДокумент();
	КонецЕсли;
	СчетФактура.ДокументыОснования.Очистить();
    СчетФактура.Заполнить(Объект.Ссылка);

	СчетФактура.НомерВходящегоДокумента = НомерСчетаФактуры;
	СчетФактура.ДатаВходящегоДокумента  = ДатаСчетаФактуры;

	Попытка 	
		СчетФактура.Записать(РежимЗаписиДокумента.Проведение);
	Исключение
		СчетФактура.Записать(РежимЗаписиДокумента.Запись);
    КонецПопытки;
	
КонецЕсли;
Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриобретениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.ПоступлениеТоваровУслуг</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Контрагент --&gt; Грузоотправитель</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПоступлениеТоваровУслуг"/>
						<ПередВыгрузкой>Если Источник.ИГС_ВидОперацииЗакупкиОборудования = Перечисления.ИГС_ВидыОперацийЗакупкиОборудования.ПриобретениеОС Тогда
	Значение = "Оборудование";
Иначе
	Значение = "Товары";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>13</Код>
						<Наименование>--&gt; Товары</Наименование>
						<Порядок>650</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииЗакупкиОборудования &lt;&gt; Перечисления.ИГС_ВидыОперацийЗакупкиОборудования.ПриобретениеМатериалов Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>25</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>24</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>26</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>27</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>28</Код>
							<Наименование>--&gt; игсСкважина</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсСкважина" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						</Свойство>
						<Свойство>
							<Код>29</Код>
							<Наименование>--&gt; игсСтатьяЗатрат</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсСтатьяЗатрат" Вид="Реквизит" Тип="СправочникСсылка.СтатьиЗатрат"/>
						</Свойство>
						<Свойство>
							<Код>41</Код>
							<Наименование>--&gt; ПодразделениеЗатрат</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПодразделениеЗатрат" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
							<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>40</Код>
							<Наименование>--&gt; Субконто1</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Субконто1" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>39</Код>
							<Наименование>--&gt; СчетЗатрат</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетЗатрат" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Группа>
						<Код>14</Код>
						<Наименование>--&gt; Оборудование</Наименование>
						<Порядок>700</Порядок>
						<ПолучитьИзВходящихДанных>true</ПолучитьИзВходящихДанных>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Оборудование" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииЗакупкиОборудования &lt;&gt; Перечисления.ИГС_ВидыОперацийЗакупкиОборудования.ПриобретениеОС Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>31</Код>
							<Наименование>--&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>30</Код>
							<Наименование>--&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>32</Код>
							<Наименование>--&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>35</Код>
							<Наименование>--&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>33</Код>
							<Наименование>--&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>34</Код>
							<Наименование>--&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>36</Код>
							<Наименование>--&gt; СчетУчета</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>15</Код>
						<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>Менеджер --&gt; Ответственный</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>Кратность --&gt; КратностьВзаиморасчетов</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Кратность" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>Курс --&gt; КурсВзаиморасчетов</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="Курс" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>38</Код>
						<Наименование>СА_ИмеетсяОригиналДокументов --&gt; НаличиеОригинала</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="СА_ИмеетсяОригиналДокументов" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаличиеОригинала</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>37</Код>
						<Наименование>--&gt; ГУИД</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ГУИД</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Ссылка.УникальныйИдентификатор();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>42</Код>
						<Наименование>игсДатаСчетФактуры --&gt; ДатаСчетФактуры</Наименование>
						<Порядок>1100</Порядок>
						<Источник Имя="игсДатаСчетФактуры" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ДатаСчетФактуры</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>43</Код>
						<Наименование>игсНомерСчетФактуры --&gt; НомерСчетФактуры</Наименование>
						<Порядок>1150</Порядок>
						<Источник Имя="игсНомерСчетФактуры" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НомерСчетФактуры</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПеремещениеТоваров</Код>
				<Наименование>Документ: Перемещение товаров</Наименование>
				<Порядок>100</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  
</ПередВыгрузкой>
				<ПослеЗагрузки>
ЭтоОригинал = ПараметрыОбъекта["НаличиеОригинала"];  
ГУИД = ПараметрыОбъекта["ГУИД"];  
Если НЕ Отказ Тогда   	
	Документ = Объект.Ссылка;	
	Если Не ЗначениеЗаполнено(Документ) Тогда
	Документ = Документы.ПеремещениеТоваров.ПолучитьСсылку(ГУИД);  
	Объект.УстановитьСсылкуНового(Документ);
	КонецЕсли;
	
	Если ЭтоОригинал Тогда 
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Оригинал;
	Иначе
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Копия;
КонецЕсли;  

Выполнить(Алгоритмы.ЗаписьВРегистрУНЭПД);
КонецЕсли;     

 Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;
Если Не Отказ Тогда
	// запомнить счета учета
	ТабЗначСчетаУчета = Объект.Товары.Выгрузить();
	// заполнить по дефолту
	СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);
	// востановить заполненные счета
	Для каждого текСтрока из ТабЗначСчетаУчета Цикл
		Если ЗначениеЗаполнено(текСтрока.СчетУчета) Тогда
			Объект.Товары[текСтрока.НомерСтроки-1].СчетУчета = текСтрока.СчетУчета;
		КонецЕсли;
		Если ЗначениеЗаполнено(текСтрока.СчетУчета) Тогда
			Объект.Товары[текСтрока.НомерСтроки-1].НовыйСчетУчета = текСтрока.НовыйСчетУчета;
		КонецЕсли;
	КонецЦикла;
	// ********************
	// ******************************************************
	Выполнить(Алгоритмы.ЗаписьДокумента);
	// ******************************************************
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПеремещениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПеремещениеТоваров</Приемник>
				<Свойства>
					<Группа>
						<Код>9</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; Коэффициент</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>игс_НовыйСчетУчетаБУ --&gt; НовыйСчетУчета</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="игс_НовыйСчетУчетаБУ" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="НовыйСчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>игс_СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="игс_СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОтправитель</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОтправитель" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>СкладОтправитель --&gt; СкладОтправитель</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>СкладПолучатель --&gt; СкладПолучатель</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийПеремещениеТоваров"/>
						<ПередВыгрузкой>Значение = "ПередачаМеждуСкладами";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>--&gt; НДСвСтоимостиТоваров</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
						<ПередВыгрузкой>Значение = "НеИзменять";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; ГУИД</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ГУИД</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Ссылка.УникальныйИдентификатор();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>17</Код>
						<Наименование>СА_ИмеетсяОригиналДокументов --&gt; НаличиеОригинала</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СА_ИмеетсяОригиналДокументов" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаличиеОригинала</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПеремещениеОС</Код>
				<Наименование>Документ: Перемещение ОС</Наименование>
				<Порядок>150</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  </ПередВыгрузкой>
				<ПослеЗагрузки>

	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ ПЕРВЫЕ 1
	|	СобытияОС.Ссылка КАК Событие
	|ИЗ
	|	Справочник.СобытияОС КАК СобытияОС
	|ГДЕ
	|	СобытияОС.ВидСобытияОС = ЗНАЧЕНИЕ(Перечисление.ВидыСобытийОС.ВнутреннееПеремещение)";
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
	
	Если ВыборкаДетальныеЗаписи.Следующий() Тогда
		Объект.СобытиеОС = ВыборкаДетальныеЗаписи.Событие;	
	КонецЕсли;


Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;  

Если Не Отказ Тогда      
	
	Выполнить(Алгоритмы.ЗаписьДокумента);   
	
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПеремещениеОС2_4</Источник>
				<Приемник>ДокументСсылка.ПеремещениеОС</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>МОЛ --&gt; МОЛОрганизации</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="МОЛ" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="МОЛОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>МОЛПолучатель --&gt; МОЛПолучатель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="МОЛПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="МОЛПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>ОС --&gt; ОС</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ОС" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ОС" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>10</Код>
							<Наименование>ОсновноеСредство --&gt; ОсновноеСредство</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ОсновноеСредство" Вид="Реквизит" Тип="СправочникСсылка.ОбъектыЭксплуатации"/>
							<Приемник Имя="ОсновноеСредство" Вид="Реквизит" Тип="СправочникСсылка.ОсновныеСредства"/>
							<КодПравилаКонвертации>ОсновныеСредстваОбъектыЭксплуатации               </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>11</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПодразделениеПолучатель --&gt; ПодразделениеПолучатель</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>игс_ОбъектРаспределения --&gt; игсОбъектРаспределения</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="игс_ОбъектРаспределения" Вид="Реквизит"/>
						<Приемник Имя="игсОбъектРаспределения" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>ИГС_СкладОтправитель --&gt; игсСкладОтправитель</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="ИГС_СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="игсСкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>ИГС_СкладПолучатель --&gt; игсСкладПолучатель</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ИГС_СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="игсСкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВнутреннееПотреблениеВТребование</Код>
				<Наименование>Документ: Внутреннее потребление товаров</Наименование>
				<Порядок>200</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  

Для каждого Стр из Источник.Товары цикл
    Если Стр.СтатьяРасходов.ТипРасходов = Перечисления.ТипыРасходов.ФормированиеСтоимостиВНА тогда
        Отказ = истина;
    КонецЕсли;
КонецЦикла;</ПередВыгрузкой>
				<ПослеЗагрузки>
ГУИД = ПараметрыОбъекта["ГУИД"];
Если НЕ Отказ Тогда  
	
	Документ = Объект.Ссылка;	
	Если Не ЗначениеЗаполнено(Документ) Тогда
	Документ = Документы.ТребованиеНакладная.ПолучитьСсылку(ГУИД);  
	Объект.УстановитьСсылкуНового(Документ);
	КонецЕсли;
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Копия;

Выполнить(Алгоритмы.ЗаписьВРегистрУНЭПД) 

	Выполнить(Алгоритмы.ЗаписьДокумента);

КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваров</Источник>
				<Приемник>ДокументСсылка.ТребованиеНакладная</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>--&gt; НДСвСтоимостиТоваров</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
						<ПередВыгрузкой>Значение = "НеИзменять";</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>12</Код>
						<Наименование>Товары --&gt; Материалы</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Материалы" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>19</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; Субконто1</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Субконто1" Вид="Реквизит"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.СчетУчета.Код = "91.02" Тогда
	Значение = ОбъектКоллекции.игс_ПрочиеДоходыИРасходы;
ИначеЕсли ОбъектКоллекции.СчетУчета.Код = "08.03" Тогда
	Значение = ОбъектКоллекции.игс_ОбъектыСтроительства;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; Субконто3</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Субконто3" Вид="Реквизит"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.СчетУчета.Код = "08.03" Тогда
	Значение = ОбъектКоллекции.игс_СпособыСтроительства;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>--&gt; Коэффициент</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>игс_СчетУчетаНоменклатуры --&gt; Счет</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="игс_СчетУчетаНоменклатуры" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="Счет" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>ИГС_ОбъектРаспределения --&gt; игсОбъектРаспределения</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="ИГС_ОбъектРаспределения" Вид="Реквизит"/>
							<Приемник Имя="игсОбъектРаспределения" Вид="Реквизит"/>
							<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>--&gt; игсВосстановительныеРаботы</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсВосстановительныеРаботы" Вид="Реквизит" Тип="Булево"/>
							<ПередВыгрузкой>Значение = Источник.ИГС_ВосстановлениеОС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>--&gt; игсОсновноеСредство</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсОсновноеСредство" Вид="Реквизит" Тип="СправочникСсылка.ОсновныеСредства"/>
							<КодПравилаКонвертации>ОсновныеСредстваОбъектыЭксплуатации               </КодПравилаКонвертации>
							<ПередВыгрузкой>Значение = Источник.ИГС_ОС;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРасходМатериалов"/>
						<ПередВыгрузкой>Если ЗначениеЗаполнено(Источник.ИГС_ПодтипВнутреннегоПотребленияТоваров) И Источник.ИГС_ПодтипВнутреннегоПотребленияТоваров.ИГС_ЭтоВводВЭксплуатациюДолота Тогда
	Значение = "игсВводВЭксплуатациюДолота";
Иначе
	Значение = "ИспользованиеМатериалов";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>--&gt; ГУИД</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ГУИД</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Ссылка.УникальныйИдентификатор();</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПередачаМатериаловВЭксплуатацию</Код>
				<Наименование>Документ: Внутреннее потребление товаров</Наименование>
				<Порядок>250</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  

Если Источник.ХозяйственнаяОперация = Перечисления.ХозяйственныеОперации.СписаниеТоваровПоТребованию тогда 
    ВыгрузитьПоПравилу(Источник, 
    Неопределено, 
    Неопределено, 
    Неопределено, 
    "ВнутреннееПотреблениеВТребование", 
    ,, 
    ); 	
    отказ = Истина;
КонецЕсли;</ПередВыгрузкой>
				<ПослеЗагрузки>Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
		
	// процедура создания справочника назначениеИспользования и СпособОтражения     	
	Если ПараметрыОбъекта &lt;&gt; Неопределено Тогда 
		
		ТаблицаПараметровИнвентарь = ПараметрыОбъекта["ИнвентарьИХозяйственныеПринадлежностиТабличнаяЧасть"]; 
		Если ТаблицаПараметровИнвентарь &lt;&gt; Неопределено Тогда
			НомерСтроки = 0;
			
			Для Каждого СтрокаПараметров Из ТаблицаПараметровИнвентарь Цикл
				
				ПодразделениеНазначения = Объект.ПодразделениеОрганизации;
				Строка = Объект.ИнвентарьИХозяйственныеПринадлежности.Получить(НомерСтроки);
				СчетЗатрат = СтрокаПараметров.СчетЗатрат;
				СтатьяЗатрат = СтрокаПараметров.СтатьяЗатрат;
				НоменклатурнаяГруппа = СтрокаПараметров.НоменклатурнаяГруппа;
				Организация = Объект.Организация;
				Выполнить(Алгоритмы.ЗаполнитьСпособОтраженияРасходов);				
				НомерСтроки = НомерСтроки + 1;
				
			КонецЦикла;
			
		КонецЕсли;    
		
		ТаблицаПараметровСпецодежда = ПараметрыОбъекта["СпецодеждаТабличнаяЧасть"];  
		Если ТаблицаПараметровСпецодежда &lt;&gt; Неопределено Тогда
			НомерСтроки = 0;
			
			Для Каждого СтрокаПараметров Из ТаблицаПараметровСпецодежда Цикл
				
				ПодразделениеНазначения = Объект.ПодразделениеОрганизации;
				Строка = Объект.Спецодежда.Получить(НомерСтроки);
				СчетЗатрат = СтрокаПараметров.СчетЗатрат;
				СтатьяЗатрат = СтрокаПараметров.СтатьяЗатрат;  
				СпособПогашенияСтоимости = СтрокаПараметров.СпособПогашенияСтоимости;
				СрокПолезногоИспользования = СтрокаПараметров.СрокПолезногоИспользования;
				НоменклатурнаяГруппа = СтрокаПараметров.НоменклатурнаяГруппа;
				
				Выполнить(Алгоритмы.ЗаполнитьНазначение);			
				НомерСтроки = НомерСтроки + 1;
				
			КонецЦикла;
		КонецЕсли;
			    
		Выполнить(Алгоритмы.ЗаписьДокумента);
	КонецЕсли;
КонецЕсли;
Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ВнутреннееПотреблениеТоваров</Источник>
				<Приемник>ДокументСсылка.ПередачаМатериаловВЭксплуатацию</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>81</Код>
						<Наименование>Товары --&gt; Спецодежда</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Спецодежда" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию &lt;&gt; Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.СпецодеждаВЭксплуатации Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>82</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>83</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>84</Код>
							<Наименование>игс_СчетПередачиНоменклатуры --&gt; СчетПередачи</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="игс_СчетПередачиНоменклатуры" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетПередачи" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>85</Код>
							<Наименование>игс_СчетУчетаНоменклатуры --&gt; СчетУчета</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="игс_СчетУчетаНоменклатуры" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>86</Код>
							<Наименование>ФизическоеЛицо --&gt; ФизЛицо</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ФизическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>87</Код>
							<Наименование>--&gt; СписокНазначений</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СписокНазначений</ИмяПараметраДляПередачи>
							<ПередВыгрузкой> Значение = Строка(ОбъектКоллекции.КатегорияЭксплуатации.СрокЭксплуатации) + ";"
 + Строка(ОбъектКоллекции.КатегорияЭксплуатации.СчетУчета) + ";" 
 + Строка(ОбъектКоллекции.КатегорияЭксплуатации.СтатьяРасходов.Код) + ";"
    + Строка(Источник.Подразделение.Код) + ";"
	+ Строка(?(ОбъектКоллекции.КатегорияЭксплуатации.СпособПогашенияСтоимостиНУ = Перечисления.СпособыПогашенияСтоимостиТМЦ.ПриПередаче,"Погашать стоимость при передаче в эксплуатацию","Линейный"))+ ";"
	+  Строка(ОбъектКоллекции.КатегорияЭксплуатации.СтатьяРасходов.Наименование) + ";" 
	+ Строка(Источник.Подразделение.Наименование) + ";"
	+ Строка(ОбъектКоллекции.КатегорияЭксплуатации.СА_СчетЗатрат);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>88</Код>
							<Наименование>--&gt; игсСчетЗабалансовогоУчета</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсСчетЗабалансовогоУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "МЦ.02";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>91</Код>
							<Наименование>СА_ГруппаАналитическогоУчета --&gt; ГруппаАналитическогоУчета</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="СА_ГруппаАналитическогоУчета" Вид="Реквизит" Тип="СправочникСсылка.ГруппыАналитическогоУчетаНоменклатуры"/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>ГруппаАналитическогоУчета</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>92</Код>
							<Наименование>--&gt; СтатьяЗатрат</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>СтатьиЗатрат                                      </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>СтатьяЗатрат</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КатегорияЭксплуатации.СтатьяРасходов;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>93</Код>
							<Наименование>--&gt; СчетЗатрат</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетЗатрат</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = Строка(ОбъектКоллекции.КатегорияЭксплуатации.СА_СчетЗатрат.Код);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>94</Код>
							<Наименование>--&gt; СпособПогашенияСтоимости</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СпособПогашенияСтоимости</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = Строка(?(ОбъектКоллекции.КатегорияЭксплуатации.СпособПогашенияСтоимостиБУ = Перечисления.СпособыПогашенияСтоимостиТМЦ.ПриПередаче,"Погашать стоимость при передаче в эксплуатацию","Линейный"));</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>95</Код>
							<Наименование>--&gt; НоменклатурнаяГруппа</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>НоменклатурнаяГруппа</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.СА_ГруппаАналитическогоУчета;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>97</Код>
							<Наименование>--&gt; СрокПолезногоИспользования</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СрокПолезногоИспользования</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = Строка(ОбъектКоллекции.КатегорияЭксплуатации.СрокЭксплуатации);</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>71</Код>
						<Наименование>Товары --&gt; ИнвентарьИХозяйственныеПринадлежности</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ИнвентарьИХозяйственныеПринадлежности" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию &lt;&gt; Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.МатериалыВЭксплуатации Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>78</Код>
							<Наименование>--&gt; игсСчетЗабалансовогоУчета</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсСчетЗабалансовогоУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "МЦ.06";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>77</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>76</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>73</Код>
							<Наименование>СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						</Свойство>
						<Свойство>
							<Код>72</Код>
							<Наименование>--&gt; НоменклатурнаяГруппа</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>НоменклатурнаяГруппа</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.СА_ГруппаАналитическогоУчета;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>90</Код>
							<Наименование>--&gt; СчетЗатрат</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<ИмяПараметраДляПередачи>СчетЗатрат</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = Строка(ОбъектКоллекции.КатегорияЭксплуатации.СА_СчетЗатрат.Код);</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>96</Код>
							<Наименование>--&gt; СтатьяЗатрат</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>СтатьиЗатрат                                      </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>СтатьяЗатрат</ИмяПараметраДляПередачи>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.КатегорияЭксплуатации.СтатьяРасходов;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>79</Код>
						<Наименование>Подразделение --&gt; Местонахождение</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="Местонахождение" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>80</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВозвратМатериаловИзЭксплуатации</Код>
				<Наименование>Документ: Прочее оприходование товаров</Наименование>
				<Порядок>300</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  

</ПередВыгрузкой>
				<ПослеЗагрузки>Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
	
	// заполнить по дефолту 
	СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);

	Выполнить(Алгоритмы.ЗаписьДокумента);
	
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПрочееОприходованиеТоваров</Источник>
				<Приемник>ДокументСсылка.ВозвратМатериаловИзЭксплуатации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>Товары --&gt; Спецодежда</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Спецодежда" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>15</Код>
							<Наименование>КоличествоУпаковок --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="КоличествоУпаковок" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>ФизическоеЛицо --&gt; ФизЛицо</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ФизическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>игс_СчетУчетаНоменклатуры --&gt; СчетУчета</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="игс_СчетУчетаНоменклатуры" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>игс_СчетПередачиНоменклатуры --&gt; СчетПередачи</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="игс_СчетПередачиНоменклатуры" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетПередачи" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; игсСчетЗабалансовогоУчета</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсСчетЗабалансовогоУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "МЦ.10";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>--&gt; ПартияМатериаловВЭксплуатации</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПартияМатериаловВЭксплуатации" Вид="Реквизит"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.ПартияТМЦВЭксплуатации.Документ;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СписаниеМатериаловИзЭксплуатации</Код>
				<Наименование>Документ: Списание из эксплуатации</Наименование>
				<Порядок>350</Порядок>
				<ПередВыгрузкой> Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли; </ПередВыгрузкой>
				<ПослеЗагрузки> 

Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
                                                                                                                                            
	// заполнить по дефолту
		СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);

		Выполнить(Алгоритмы.ЗаписьДокумента);
	
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СписаниеИзЭксплуатации</Источник>
				<Приемник>ДокументСсылка.СписаниеМатериаловИзЭксплуатации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ИГС_Склад --&gt; игсСклад</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ИГС_Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="игсСклад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>--&gt; СпособСписанияРасходов</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СпособСписанияРасходов" Вид="Реквизит" Тип="ПеречислениеСсылка.СпособыСписанияРасходов"/>
						<ПередВыгрузкой>Значение = "ПоНазначениюИспользования";</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>10</Код>
						<Наименование>Товары --&gt; ИнвентарьИХозяйственныеПринадлежности</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ИнвентарьИХозяйственныеПринадлежности" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию &lt;&gt; Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.МатериалыВЭксплуатации Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>15</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; ПартияМатериаловВЭксплуатации</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПартияМатериаловВЭксплуатации" Вид="Реквизит"/>
							<ПередВыгрузкой>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию = Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.СпецодеждаВЭксплуатации Тогда
	Значение = ОбъектКоллекции.ПартияТМЦВЭксплуатации.Документ;
Иначе
	Значение = Документы.ВнутреннееПотреблениеТоваров.ПустаяСсылка();
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>--&gt; игсСчетЗабалансовогоУчета</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсСчетЗабалансовогоУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "МЦ.06";</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>16</Код>
						<Наименование>Товары --&gt; Спецодежда</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Спецодежда" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию &lt;&gt; Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.СпецодеждаВЭксплуатации Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>21</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; игсСчетЗабалансовогоУчета</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="игсСчетЗабалансовогоУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "МЦ.02";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>--&gt; ПартияМатериаловВЭксплуатации</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПартияМатериаловВЭксплуатации" Вид="Реквизит"/>
							<ПередВыгрузкой>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию = Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.СпецодеждаВЭксплуатации Тогда
	Значение = ОбъектКоллекции.ПартияТМЦВЭксплуатации.Документ;
Иначе
	Значение = Документы.ВнутреннееПотреблениеТоваров.ПустаяСсылка();
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>ФизическоеЛицо --&gt; ФизЛицо</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ФизическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>игс_СчетПередачи --&gt; СчетПередачи</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="игс_СчетПередачи" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетПередачи" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПеремещениеМатериаловВЭксплуатации</Код>
				<Наименование>Документ: Перемещение в эксплуатации</Наименование>
				<Порядок>400</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  

</ПередВыгрузкой>
				<ПослеЗагрузки>Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
	
	ТаблицаПараметровСпецодежда = ПараметрыОбъекта["игсСпецодеждаТабличнаяЧасть"];  
	Если ТаблицаПараметровСпецодежда &lt;&gt; Неопределено Тогда
		
		Объект.игсОтправитель = ТаблицаПараметровСпецодежда[0].Отправитель;   
		
		Объект.игсПолучатель = ТаблицаПараметровСпецодежда[0].Получатель;
	КонецЕсли;
                            		
	Выполнить(Алгоритмы.ЗаписьДокумента);
	
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПеремещениеВЭксплуатации</Источник>
				<Приемник>ДокументСсылка.ИмпВнутреннееПеремещениеМатериаловВЭксплуатации</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ИмпВидыОперацийВнутреннееПеремещение"/>
						<ПередВыгрузкой>Значение = "ПеремещениеМатериаловВЭксплуатации";</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>9</Код>
						<Наименование>Товары --&gt; игсИнвентарьИХозяйственныеПринадлежности</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="игсИнвентарьИХозяйственныеПринадлежности" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию &lt;&gt; Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.МатериалыВЭксплуатации Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>17</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>--&gt; СчетПередачи</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетПередачи" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "МЦ.06";</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>13</Код>
						<Наименование>Товары --&gt; игсСпецодежда</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="игсСпецодежда" Вид="ТабличнаяЧасть"/>
						<ПередОбработкойВыгрузки>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию &lt;&gt; Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.СпецодеждаВЭксплуатации Тогда
	Отказ = Истина;
КонецЕсли;</ПередОбработкойВыгрузки>
						<Свойство>
							<Код>14</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; ПартияМатериаловВЭксплуатации</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ПартияМатериаловВЭксплуатации" Вид="Реквизит"/>
							<КодПравилаКонвертации>ПередачаМатериаловВЭксплуатацию                   </КодПравилаКонвертации>
							<ПередВыгрузкой>Если Источник.ИГС_ВидОперацииПередачиВЭксплуатацию = Перечисления.ИГС_ВидыОперацийМатериалыВЭксплуатации.СпецодеждаВЭксплуатации Тогда
	Значение = ОбъектКоллекции.ПартияТМЦВЭксплуатации.Документ;
Иначе
	Значение = Документы.ВнутреннееПотреблениеТоваров.ПустаяСсылка();
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>--&gt; СчетПередачи</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="СчетПередачи" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<ПередВыгрузкой>Значение = "МЦ.02";</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>ФизическоеЛицо --&gt; Отправитель</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ФизическоеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>Отправитель</ИмяПараметраДляПередачи>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>ФизическоеЛицоПолучатель --&gt; Получатель</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="ФизическоеЛицоПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
							<Приемник Имя="" Вид=""/>
							<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
							<ИмяПараметраДляПередачи>Получатель</ИмяПараметраДляПередачи>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>10</Код>
						<Наименование>ИГС_Склад --&gt; игсСкладОтправитель</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ИГС_Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="игсСкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>ИГС_СкладПолучатель --&gt; игсСкладПолучатель</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ИГС_СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="игсСкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СписаниеТоваров</Код>
				<Наименование>Документ: Списание недостач товаров</Наименование>
				<Порядок>450</Порядок>
				<ПередВыгрузкой> Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли; </ПередВыгрузкой>
				<ПослеЗагрузки>
Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
	// запомнить счета учета
	ТабЗначСчетаУчета = Объект.Товары.Выгрузить();
	// заполнить по дефолту
	СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);

	// востановить заполненные счета
	Для каждого текСтрока из ТабЗначСчетаУчета Цикл
		Если ЗначениеЗаполнено(текСтрока.СчетУчета) Тогда
			Объект.Товары[текСтрока.НомерСтроки-1].СчетУчета = текСтрока.СчетУчета;
		КонецЕсли;
	КонецЦикла;
	// ********************

	// ******************************************************
	Выполнить(Алгоритмы.ЗаписьДокумента);
	// ******************************************************
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СписаниеНедостачТоваров</Источник>
				<Приемник>ДокументСсылка.СписаниеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийСписаниеТоваров"/>
						<ПередВыгрузкой>  Значение = "СписаниеСоСклада"</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>10</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>13</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>игс_СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="игс_СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОприходованиеТоваров</Код>
				<Наименование>Документ: Оприходование излишков товаров</Наименование>
				<Порядок>500</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  </ПередВыгрузкой>
				<ПриЗагрузке>Объект.СтатьяПрочихДоходовРасходов = ПредопределенноеЗначение("Справочник.ПрочиеДоходыИРасходы.ОприходованиеИзлишков");</ПриЗагрузке>
				<ПослеЗагрузки>Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда

	ТабЗначСчетаУчета = Объект.Товары.Выгрузить();
	// заполнить по дефолту
	СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);
	// востановить заполненные счета
	Для каждого текСтрока из ТабЗначСчетаУчета Цикл
		Если ЗначениеЗаполнено(текСтрока.СчетУчета) Тогда
			Объект.Товары[текСтрока.НомерСтроки-1].СчетУчета = текСтрока.СчетУчета;
		КонецЕсли;
	КонецЦикла;
	// ********************     
	
	// ******************************************************
	Выполнить(Алгоритмы.ЗаписьДокумента);
	// ******************************************************
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ОприходованиеИзлишковТоваров</Источник>
				<Приемник>ДокументСсылка.ОприходованиеТоваров</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>8</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>12</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>11</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>10</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>--&gt; Коэффициент</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="Коэффициент" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Значение = 1;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>9</Код>
							<Наименование>игс_СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="игс_СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
						</Свойство>
					</Группа>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>Документ: Сборка товаров</Наименование>
				<Порядок>550</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  
</ПередВыгрузкой>
				<ПослеЗагрузки>Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда	
	
	// запомнить счета учета
	ТабЗначСчетаУчета = Объект.Комплектующие.Выгрузить();
	// заполнить по дефолту   
	СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);
	// востановить заполненные счета
	Для каждого текСтрока из ТабЗначСчетаУчета Цикл
		Если ЗначениеЗаполнено(текСтрока.СчетУчета) Тогда
			Объект.Комплектующие[текСтрока.НомерСтроки-1].СчетУчета = текСтрока.СчетУчета;
		КонецЕсли;
	КонецЦикла;
	// ********************

	СтруктураДанных = Новый Структура();
	СтруктураДанных.Вставить("Номенклатура", 		Объект.Номенклатура);
	СтруктураДанных.Вставить("Количество", 			Объект.Количество);
	
	// ******************************************************
	Выполнить(Алгоритмы.ЗаписьДокумента);
	// ******************************************************
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СборкаТоваров</Источник>
				<Приемник>ДокументСсылка.КомплектацияНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Количество --&gt; Количество</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Комплектующие</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Комплектующие" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>16</Код>
							<Наименование>--&gt; ДоляСтоимости</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ДоляСтоимости" Вид="Реквизит" Тип="Число"/>
							<ПередВыгрузкой>Если ОбъектКоллекции.ДоляСтоимости = 0 Тогда
	Значение = 1;
Иначе
	Значение = ОбъектКоллекции.ДоляСтоимости;
КонецЕсли;</ПередВыгрузкой>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>игс_СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="игс_СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>17</Код>
						<Наименование>--&gt; НДСвСтоимостиТоваров</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="НДСвСтоимостиТоваров" Вид="Реквизит" Тип="ПеречислениеСсылка.ДействиеНДСВСтоимостиТоваров"/>
						<ПередВыгрузкой>Значение = "НеИзменять"</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>18</Код>
						<Наименование>игс_СчетУчета --&gt; СчетУчета</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="игс_СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>Документ: Реализация товаров и услуг</Наименование>
				<Порядок>600</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  
</ПередВыгрузкой>
				<ПослеЗагрузки>
Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли; 
 
ГУИД = ПараметрыОбъекта["ГУИД"];

Если Не Отказ Тогда
	
	Документ = Объект.Ссылка;	
	Если Не ЗначениеЗаполнено(Документ) Тогда
		Документ = Документы.РеализацияТоваровУслуг.ПолучитьСсылку(ГУИД);  
		Объект.УстановитьСсылкуНового(Документ);
	КонецЕсли;
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Копия;
	
	Выполнить(Алгоритмы.ЗаписьВРегистрУНЭПД)

	Объект.СчетУчетаРасчетовПоТаре = ПланыСчетов.Хозрасчетный.НайтиПоКоду("76.06");

	// запомнить счета учета
	ТабЗначСчетаУчета = Объект.Товары.Выгрузить();
	// заполнить по дефолту
		СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);
	// востановить заполненные счета
	Для каждого текСтрока из ТабЗначСчетаУчета Цикл
		Если ЗначениеЗаполнено(текСтрока.СчетУчета) Тогда
			Объект.Товары[текСтрока.НомерСтроки-1].СчетУчета = текСтрока.СчетУчета;
		КонецЕсли;
	КонецЦикла;
	// ********************

	Для каждого Стр из Объект.Товары Цикл
	    Стр.СчетДоходов =  ПланыСчетов.Хозрасчетный.НайтиПоКоду("91.01");
	    Стр.СчетРасходов =  ПланыСчетов.Хозрасчетный.НайтиПоКоду("91.02");
	    Стр.Субконто = ПредопределенноеЗначение("Справочник.ПрочиеДоходыИРасходы.РеализацияПрочегоИмущества");  
	КонецЦикла;
	
	
	// ******************************************************
	Выполнить(Алгоритмы.ЗаписьДокумента);
	// ******************************************************
	
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.РеализацияТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.РеализацияТоваровУслуг</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>АдресДоставки --&gt; АдресДоставки</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="АдресДоставки" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ГлавныйБухгалтер --&gt; ГлавныйБухгалтер</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ГлавныйБухгалтер" Вид="Реквизит" Тип="СправочникСсылка.ОтветственныеЛицаОрганизаций"/>
						<Приемник Имя="ГлавныйБухгалтер" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ОтветственныеВФизЛица                             </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Грузоотправитель --&gt; Грузоотправитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузоотправитель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Грузополучатель --&gt; Грузополучатель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Грузополучатель" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true">
						<Код>13</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ДоверенностьВыдана --&gt; ДоверенностьВыдана</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ДоверенностьВыдана" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьВыдана" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ДоверенностьДата --&gt; ДоверенностьДата</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="ДоверенностьДата" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДоверенностьДата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДоверенностьНомер --&gt; ДоверенностьНомер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ДоверенностьНомер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ДоверенностьНомер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Группа>
						<Код>16</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>23</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>игс_СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="игс_СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>37</Код>
							<Наименование>--&gt; ЕдиницаИзмерения</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
							<ПередВыгрузкой>Значение = ОбъектКоллекции.Номенклатура.ЕдиницаИзмерения;</ПередВыгрузкой>
						</Свойство>
						<Свойство Отключить="true">
							<Код>38</Код>
							<Наименование>--&gt;</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="" Вид=""/>
							<Приемник Имя="" Вид=""/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>30</Код>
						<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>24</Код>
						<Наименование>Менеджер --&gt; Ответственный</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>25</Код>
						<Наименование>Курс --&gt; КурсВзаиморасчетов</Наименование>
						<Порядок>1000</Порядок>
						<Источник Имя="Курс" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>27</Код>
						<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>1050</Порядок>
						<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>31</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>1100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийРеализацияТоваров"/>
						<ПередВыгрузкой>Значение = "ПродажаКомиссия";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>28</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>1150</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
					</Свойство>
					<Свойство>
						<Код>32</Код>
						<Наименование>Кратность --&gt; КратностьВзаиморасчетов</Наименование>
						<Порядок>1200</Порядок>
						<Источник Имя="Кратность" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>33</Код>
						<Наименование>Курс --&gt; КурсВзаиморасчетов</Наименование>
						<Порядок>1250</Порядок>
						<Источник Имя="Курс" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>34</Код>
						<Наименование>Менеджер --&gt; Ответственный</Наименование>
						<Порядок>1300</Порядок>
						<Источник Имя="Менеджер" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>35</Код>
						<Наименование>ЦенаВключаетНДС --&gt; СуммаВключаетНДС</Наименование>
						<Порядок>1350</Порядок>
						<Источник Имя="ЦенаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СуммаВключаетНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>36</Код>
						<Наименование>ИГС_СчетРасчетовСКонтрагентом --&gt; СчетУчетаРасчетовСКонтрагентом</Наименование>
						<Порядок>1400</Порядок>
						<Источник Имя="ИГС_СчетРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<Приемник Имя="СчетУчетаРасчетовСКонтрагентом" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование>--&gt; СчетУчетаРасчетовПоАвансам</Наименование>
						<Порядок>1450</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СчетУчетаРасчетовПоАвансам" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
						<ПередВыгрузкой>Если СокрЛП(Источник.ИГС_СчетРасчетовСКонтрагентом.Код) = "76.06" Тогда
	Значение = Новый Структура("Код", "76.06");
Иначе
	Значение = Новый Структура("Код", "62.02");
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>39</Код>
						<Наименование>--&gt; ГУИД</Наименование>
						<Порядок>1500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ГУИД</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Ссылка.УникальныйИдентификатор();</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПоступлениеДопРасходов</Код>
				<Наименование>Документ: Приобретение услуг и прочих активов</Наименование>
				<Порядок>650</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  
</ПередВыгрузкой>
				<ПослеЗагрузки>
Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;
 
ЭтоОригинал = ПараметрыОбъекта["НаличиеОригинала"];  
ГУИД = ПараметрыОбъекта["ГУИД"];
Если НЕ Отказ Тогда 
	
	Документ = Объект.Ссылка;	
	Если Не ЗначениеЗаполнено(Документ) Тогда
	Документ = Документы.ПоступлениеДопРасходов.ПолучитьСсылку(ГУИД);  
	Объект.УстановитьСсылкуНового(Документ);
	КонецЕсли;
	
	Если ЭтоОригинал Тогда 
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Оригинал;
	Иначе
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Копия;
КонецЕсли;  

Выполнить(Алгоритмы.ЗаписьВРегистрУНЭПД)    

	// заполним табчасть по документам поставки
	МассивДокПоставки = Объект.Товары.ВыгрузитьКолонку("ДокументПартии");

	// сумма доп расходов и ндс
	Объект.СуммаДокумента = Объект.Товары.Итог("Сумма");
	Объект.СуммаНДС = Объект.Товары.Итог("СуммаНДС");
	Если Объект.СуммаНДС&gt;0 Тогда
		Объект.УчитыватьНДС = Истина;
	КонецЕсли;
	
	Объект.Товары.Очистить();

	Для каждого текДок Из МассивДокПоставки Цикл
		
		Если ЗначениеЗаполнено(текДок) Тогда
			Объект.ЗаполнитьТоварыПоПоступлениюТоваров(текДок, Объект.Товары);
		КонецЕсли;
		
	КонецЦикла;

	// ***
	// распределить
	Объект.СпособРаспределения = Перечисления.СпособыРаспределенияДопРасходов.ПоКоличеству;
	// Распределить...	
	ОтменаРаспределения = Ложь;

		Если Объект.Сумма = 0 Тогда
			ОбщегоНазначения.Сообщение("Не указана сумма расходов для распределения по табличной части", СтатусСообщения.Внимание);
			ОтменаРаспределения = Истина;
		ИначеЕсли Объект.Товары.Количество() = 0 Тогда
			ОбщегоНазначения.Сообщение("Табличная часть не содержит ни одной строки", СтатусСообщения.Внимание);
			ОтменаРаспределения = Истина;;
		КонецЕсли;
			
		Если Объект.СпособРаспределения = Перечисления.СпособыРаспределенияДопРасходов.ПоКоличеству Тогда
			
			МассивКоэффициентов = Объект.Товары.ВыгрузитьКолонку("Количество");
			СуммаКоэффициентов  = Объект.Товары.Итог("Количество");
		КонецЕсли;	

		Если СуммаКоэффициентов = 0 Тогда
			ОбщегоНазначения.Сообщение("В табличной части не указаны коэффициенты распределения", СтатусСообщения.Внимание);
			ОтменаРаспределения = Истина;;
		КонецЕсли;
		
		// Распределим сумму расходов из шапки документа пропорционально коэффициентам.
		// Сумму расходов в шапке документа обнулим.
		Если Не ОтменаРаспределения Тогда
			РезультатРаспределения = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(Объект.Сумма, МассивКоэффициентов);
			
			Для НомерСтроки = 0 По РезультатРаспределения.Количество() - 1 Цикл
				Объект.Товары[НомерСтроки].Сумма = Объект.Товары[НомерСтроки].Сумма + РезультатРаспределения[НомерСтроки];
			КонецЦикла;
			
			Объект.Сумма = 0;
		
			Если Объект.УчитыватьНДС И Объект.СуммаНДС &gt; 0 Тогда
				
				// Аналогично распределим сумму НДС расходов из шапки документа.
				РезультатРаспределения = ОбщегоНазначения.РаспределитьСуммуПропорциональноКоэффициентам(Объект.СуммаНДС, МассивКоэффициентов);
				
				Для НомерСтроки = 0 По РезультатРаспределения.Количество() - 1 Цикл
					Объект.Товары[НомерСтроки].СуммаНДС = Объект.Товары[НомерСтроки].СуммаНДС + РезультатРаспределения[НомерСтроки];
				КонецЦикла;
				
				Объект.СуммаНДС = 0;
				
			КонецЕсли;
		КонецЕсли;
	Выполнить(Алгоритмы.ЗаписьДокумента);
	// ******************************************************
КонецЕсли;

// ******************************************************
// счет фактура
Если Не Отказ Тогда  
	
	НомерСчетаФактуры = ПараметрыОбъекта["НомерСчетФактуры"]; 
	ДатаСчетаФактуры  = ПараметрыОбъекта["ДатаСчетФактуры"]; ;
	СчетФактура = УчетНДСПереопределяемый.НайтиПодчиненныйСчетФактуруВыданныйНаРеализацию(Объект.Ссылка);
	Если ЗначениеЗаполнено(СчетФактура) Тогда
		СчетФактура = СчетФактура.ПолучитьОбъект();		
	Иначе
		СчетФактура = Документы.СчетФактураПолученный.СоздатьДокумент();
	КонецЕсли;
	СчетФактура.ДокументыОснования.Очистить();
    СчетФактура.Заполнить(Объект.Ссылка);

	СчетФактура.НомерВходящегоДокумента = НомерСчетаФактуры;
	СчетФактура.ДатаВходящегоДокумента  = ДатаСчетаФактуры;

	Попытка 	
		СчетФактура.Записать(РежимЗаписиДокумента.Проведение);
	Исключение
		СчетФактура.Записать(РежимЗаписиДокумента.Запись);
	КонецПопытки; 
	
Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриобретениеУслугПрочихАктивов</Источник>
				<Приемник>ДокументСсылка.ПоступлениеДопРасходов</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>--&gt; СтавкаНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
						<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						<ПередВыгрузкой>Значение = Источник.Расходы[0].СтавкаНДС</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Кратность --&gt; КратностьВзаиморасчетов</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Кратность" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="КратностьВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>Курс --&gt; КурсВзаиморасчетов</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Курс" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="КурсВзаиморасчетов" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Договор --&gt; ДоговорКонтрагента</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<Приемник Имя="ДоговорКонтрагента" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						<КодПравилаКонвертации>ДоговорыКонтрагентов                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Валюта --&gt; ВалютаДокумента</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Валюта" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаДокумента" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<КодПравилаКонвертации>Валюты                                            </КодПравилаКонвертации>
					</Свойство>
					<Группа>
						<Код>15</Код>
						<Наименование>Расходы --&gt; Товары</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Расходы" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>19</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>АналитикаРасходов --&gt; ДокументПартии</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="АналитикаРасходов" Вид="Реквизит"/>
							<Приемник Имя="ДокументПартии" Вид="Реквизит"/>
							<КодПравилаКонвертации>АвансовыйОтчет                                    </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; ГУИД</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ГУИД</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Ссылка.УникальныйИдентификатор();</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>21</Код>
						<Наименование>СА_ИмеетсяОригиналДокументов --&gt; НаличиеОригинала</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="СА_ИмеетсяОригиналДокументов" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаличиеОригинала</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>22</Код>
						<Наименование>игсДатаСчетФактуры --&gt; ДатаСчетФактуры</Наименование>
						<Порядок>900</Порядок>
						<Источник Имя="игсДатаСчетФактуры" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ДатаСчетФактуры</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>23</Код>
						<Наименование>игсНомерСчетФактуры --&gt; НомерСчетФактуры</Наименование>
						<Порядок>950</Порядок>
						<Источник Имя="игсНомерСчетФактуры" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НомерСчетФактуры</ИмяПараметраДляПередачи>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СчетФактураВыданный</Код>
				<Наименование>Документ: Счет-фактура выданный</Наименование>
				<Порядок>700</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  
</ПередВыгрузкой>
				<ПослеЗагрузки> Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда

	Объект.КодСпособаВыставления = 1;
	Объект.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыВыставленного.НаРеализацию;
	
КонецЕсли;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.СчетФактураВыданный</Источник>
				<Приемник>ДокументСсылка.СчетФактураВыданный</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>17</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>ДатаВыставления --&gt; ДатаВыставления</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВыставления" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ДокументОснование" Вид="Реквизит"/>
						<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Исправление --&gt; Исправление</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Исправление" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="Исправление" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>КодВидаОперации --&gt; КодВидаОперации</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодВидаОперации" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Контрагент --&gt; Контрагент</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Контрагент" Вид="Реквизит"/>
						<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>КППКонтрагента --&gt; КППКонтрагента</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="КППКонтрагента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КППКонтрагента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>18</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>НомерИсправления --&gt; НомерИсправления</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="НомерИсправления" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерИсправления" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>19</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>СводныйКорректировочный --&gt; СводныйКорректировочный</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СводныйКорректировочный" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="СводныйКорректировочный" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Группа>
						<Код>1</Код>
						<Наименование>ДокументыОснования --&gt; ДокументыОснования</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ДокументыОснования" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>6</Код>
							<Наименование>ДатаИсправленияИсходногоДокумента --&gt; ДатаИсправленияИсходногоДокумента</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>5</Код>
							<Наименование>ДатаИсходногоДокумента --&gt; ДатаИсходногоДокумента</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаИсходногоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>4</Код>
							<Наименование>ДокументОснование --&gt; ДокументОснование</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="ДокументОснование" Вид="Реквизит"/>
							<Приемник Имя="ДокументОснование" Вид="Реквизит"/>
						</Свойство>
						<Свойство>
							<Код>3</Код>
							<Наименование>НомерИсправленияИсходногоДокумента --&gt; НомерИсправленияИсходногоДокумента</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерИсправленияИсходногоДокумента" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>2</Код>
							<Наименование>НомерИсходногоДокумента --&gt; НомерИсходногоДокумента</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерИсходногоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>20</Код>
						<Наименование>--&gt; ВидСчетаФактуры</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидСчетаФактуры" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидСчетаФактурыВыставленного"/>
						<ПередВыгрузкой>Значение = "НаРеализацию";</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>АвансовыйОтчет</Код>
				<Наименование>Документ: Приобретение товаров и услуг</Наименование>
				<Порядок>750</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  
</ПередВыгрузкой>
				<ПослеЗагрузки> 
ЭтоОригинал = ПараметрыОбъекта["НаличиеОригинала"];  
ГУИД = ПараметрыОбъекта["ГУИД"];
Если НЕ Отказ Тогда  	
	Документ = Объект.Ссылка;	
	Если Не ЗначениеЗаполнено(Документ) Тогда
	Документ = Документы.АвансовыйОтчет.ПолучитьСсылку(ГУИД);  
	Объект.УстановитьСсылкуНового(Документ);
	КонецЕсли;
	
	Если ЭтоОригинал Тогда 
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Оригинал;
	Иначе
	ВидЭкземпляра = Перечисления.игсВидыЭкземпляраПервичногоДокумента.Копия;
КонецЕсли;  

Выполнить(Алгоритмы.ЗаписьВРегистрУНЭПД);   

	//Объект.УчитыватьНДС = Истина;
	
	// заполнить по дефолту
	ТабЗначСчетаУчета = Объект.Товары.Выгрузить();
	// заполнить по дефолту
	СчетаУчетаВДокументах.ЗаполнитьПередЗаписью(Объект,РежимЗаписиДокумента.Проведение);

	Для Каждого Стр из Объект.Товары Цикл
				
		// создать СФ
		Если ЗначениеЗаполнено(Стр.НомерСФ) Тогда
			Стр.ПредъявленСФ = Истина;
		КонецЕсли;
		
		Если Не ЗначениеЗаполнено(Стр.СчетУчетаНДС) Тогда
			Стр.СчетУчетаНДС = ПланыСчетов.Хозрасчетный.НайтиПоКоду("19.03");
		КонецЕсли;
		
	КонецЦикла;
	
	// ******************************************************
	Выполнить(Алгоритмы.ЗаписьДокументаПроведение);
	Выполнить(Алгоритмы.СоздатьСчетФактурыАвансовогоОтчета);
	Выполнить(Алгоритмы.ЗаписьДокументаПроведение);
	// ******************************************************
	
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ПриобретениеТоваровУслуг</Источник>
				<Приемник>ДокументСсылка.АвансовыйОтчет</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>8</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>1</Код>
						<Наименование>КоличествоДокументов --&gt; КоличествоДокументов</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="КоличествоДокументов" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоличествоДокументов" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>КоличествоЛистов --&gt; КоличествоЛистов</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КоличествоЛистов" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КоличествоЛистов" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>НазначениеАванса --&gt; НазначениеАванса</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НазначениеАванса" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НазначениеАванса" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>9</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>СуммаДокумента --&gt; СуммаДокумента</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
						<Приемник Имя="СуммаДокумента" Вид="Реквизит" Тип="Число"/>
					</Свойство>
					<Группа>
						<Код>11</Код>
						<Наименование>Товары --&gt; Товары</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>24</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>22</Код>
							<Наименование>СтавкаНДС --&gt; СтавкаНДС</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<Приемник Имя="СтавкаНДС" Вид="Реквизит" Тип="ПеречислениеСсылка.СтавкиНДС"/>
							<КодПравилаКонвертации>СтавкиНДС                                         </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>21</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>СуммаНДС --&gt; СуммаНДС</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="СуммаНДС" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Цена --&gt; Цена</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Цена" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Цена" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>игс_ДатаСФ --&gt; ДатаСФ</Наименование>
							<Порядок>350</Порядок>
							<Источник Имя="игс_ДатаСФ" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаСФ" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>игс_НомерСФ --&gt; НомерСФ</Наименование>
							<Порядок>400</Порядок>
							<Источник Имя="игс_НомерСФ" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерСФ" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>игс_Поставщик --&gt; Поставщик</Наименование>
							<Порядок>450</Порядок>
							<Источник Имя="игс_Поставщик" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<Приемник Имя="Поставщик" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
						</Свойство>
						<Свойство>
							<Код>15</Код>
							<Наименование>игс_ВидВхДокумента --&gt; ВидДокВходящий</Наименование>
							<Порядок>500</Порядок>
							<Источник Имя="игс_ВидВхДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="ВидДокВходящий" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>14</Код>
							<Наименование>игс_ДатаВхДокумента --&gt; ДатаВходящегоДокумента</Наименование>
							<Порядок>550</Порядок>
							<Источник Имя="игс_ДатаВхДокумента" Вид="Реквизит" Тип="Дата"/>
							<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						</Свойство>
						<Свойство>
							<Код>13</Код>
							<Наименование>игс_НомерВхДокумента --&gt; НомерВходящегоДокумента</Наименование>
							<Порядок>600</Порядок>
							<Источник Имя="игс_НомерВхДокумента" Вид="Реквизит" Тип="Строка"/>
							<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						</Свойство>
						<Свойство>
							<Код>12</Код>
							<Наименование>игс_СчетУчета --&gt; СчетУчета</Наименование>
							<Порядок>650</Порядок>
							<Источник Имя="игс_СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<Приемник Имя="СчетУчета" Вид="Реквизит" Тип="ПланСчетовСсылка.Хозрасчетный"/>
							<КодПравилаКонвертации>Хозрасчетный                                      </КодПравилаКонвертации>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>25</Код>
						<Наименование>ПодотчетноеЛицо --&gt; ФизЛицо</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="ПодотчетноеЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="ФизЛицо" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Склад --&gt; Склад</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
					</Свойство>
					<Свойство>
						<Код>26</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
						<КодПравилаКонвертации>СтруктураПредприятия                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>27</Код>
						<Наименование>--&gt; ВидОперации</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыОперацийАвансовыйОтчет"/>
						<ПередВыгрузкой>Значение = "ПокупкаОплатаПрочее";</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>28</Код>
						<Наименование>СА_ИмеетсяОригиналДокументов --&gt; НаличиеОригинала</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СА_ИмеетсяОригиналДокументов" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>НаличиеОригинала</ИмяПараметраДляПередачи>
					</Свойство>
					<Свойство>
						<Код>29</Код>
						<Наименование>--&gt; ГУИД</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
						<ИмяПараметраДляПередачи>ГУИД</ИмяПараметраДляПередачи>
						<ПередВыгрузкой>Значение = Источник.Ссылка.УникальныйИдентификатор();</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>игсДвижениеЗабалансовыхМТР</Код>
				<Наименование>Документ: Движение забалансовых МТР (ИГС)</Наименование>
				<Порядок>800</Порядок>
				<ПередВыгрузкой>Если Источник.Дата &lt; Константы.игсДатаПереходаНаБСО.Получить() Тогда 
	Отказ = Истина;
КонецЕсли;  
</ПередВыгрузкой>
				<ПослеЗагрузки>Если Объект.Проведен Тогда
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Загрузка проведенного";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= "Документ проведен в базе источника! загрузка отменена!";
	Отказ = Истина;
КонецЕсли;

Если Не Отказ Тогда
	// ******************************************************  
	Выполнить(Алгоритмы.ЗаписьДокументаПроведение);
	// ******************************************************
	
КонецЕсли;

Отказ = Истина;</ПослеЗагрузки>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>ДокументСсылка.ИГС_ДвижениеЗабалансовыхМТР</Источник>
				<Приемник>ДокументСсылка.игсДвижениеЗабалансовыхМТР</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ВидОперации --&gt; ВидДвижения</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.ИГС_ВидыОперацийДвиженияЗабалансовыхМТР"/>
						<Приемник Имя="ВидДвижения" Вид="Реквизит" Тип="ПеречислениеСсылка.игсВидыДвижений"/>
						<КодПравилаКонвертации>ВидыДвижений                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ДатаВходящегоДокумента --&gt; ДатаВходящегоДокумента</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="ДатаВходящегоДокумента" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Исполнитель --&gt; Исполнитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Исполнитель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="Исполнитель" Вид="Реквизит" Тип="СправочникСсылка.ФизическиеЛица"/>
						<КодПравилаКонвертации>ФизическиеЛица                                    </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>НомерВходящегоДокумента --&gt; НомерВходящегоДокумента</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НомерВходящегоДокумента" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<КодПравилаКонвертации>Организации                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Ответственный --&gt; Ответственный</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<Приемник Имя="Ответственный" Вид="Реквизит" Тип="СправочникСсылка.Пользователи"/>
						<КодПравилаКонвертации>Пользователи                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>СкважинаПолучатель --&gt; СкважинаПолучатель</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="СкважинаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.ГруппыАналитическогоУчетаНоменклатуры"/>
						<Приемник Имя="СкважинаПолучатель" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ИГС_ВидыОперацийДвиженияЗабалансовыхМТР.Приход Тогда
	Значение = Источник.Скважина;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>СкладПолучатель --&gt; СкладПолучатель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладПолучатель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ИГС_ВидыОперацийДвиженияЗабалансовыхМТР.Приход Тогда
	Значение = Источник.Склад;
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство Поиск="true">
						<Код>10</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="Дата" Вид="Свойство" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Свойство" Тип="Дата"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>11</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Номер" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>Скважина --&gt; СкважинаОтправитель</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="Скважина" Вид="Реквизит" Тип="СправочникСсылка.ГруппыАналитическогоУчетаНоменклатуры"/>
						<Приемник Имя="СкважинаОтправитель" Вид="Реквизит" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ИГС_ВидыОперацийДвиженияЗабалансовыхМТР.Приход Тогда
	Значение = Справочники.ГруппыАналитическогоУчетаНоменклатуры.ПустаяСсылка();
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>Склад --&gt; СкладОтправитель</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="Склад" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="СкладОтправитель" Вид="Реквизит" Тип="СправочникСсылка.Склады"/>
						<КодПравилаКонвертации>Склады                                            </КодПравилаКонвертации>
						<ПередВыгрузкой>Если Источник.ВидОперации = Перечисления.ИГС_ВидыОперацийДвиженияЗабалансовыхМТР.Приход Тогда
	Значение = Справочники.Склады.ПустаяСсылка();
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
					<Группа>
						<Код>15</Код>
						<Наименование>Товары --&gt; Номенклатура</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="Товары" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="Номенклатура" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>21</Код>
							<Наименование>Договор --&gt; Договор</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
							<Приемник Имя="Договор" Вид="Реквизит" Тип="СправочникСсылка.ДоговорыКонтрагентов"/>
						</Свойство>
						<Свойство>
							<Код>20</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>19</Код>
							<Наименование>Номенклатура --&gt; Номенклатура</Наименование>
							<Порядок>150</Порядок>
							<Источник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
							<Приемник Имя="Номенклатура" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						</Свойство>
						<Свойство>
							<Код>18</Код>
							<Наименование>Себестоимость --&gt; Себестоимость</Наименование>
							<Порядок>200</Порядок>
							<Источник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Себестоимость" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>17</Код>
							<Наименование>Сумма --&gt; Сумма</Наименование>
							<Порядок>250</Порядок>
							<Источник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Сумма" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>16</Код>
							<Наименование>Партнер --&gt; Контрагент</Наименование>
							<Порядок>300</Порядок>
							<Источник Имя="Партнер" Вид="Реквизит" Тип="СправочникСсылка.Партнеры"/>
							<Приемник Имя="Контрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
							<ПередВыгрузкой>Значение = Неопределено;

Запрос = Новый Запрос;
Запрос.Текст = 
"ВЫБРАТЬ
|	Контрагенты.Ссылка КАК Ссылка
|ИЗ
|	Справочник.Контрагенты КАК Контрагенты
|ГДЕ
|	Контрагенты.Партнер = &amp;Партнер";

Запрос.УстановитьПараметр("Партнер", ОбъектКоллекции.Партнер);
РезультатЗапроса = Запрос.Выполнить();
ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();

Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
	Значение = ВыборкаДетальныеЗаписи.Ссылка;	
КонецЦикла;</ПередВыгрузкой>
						</Свойство>
					</Группа>
					<Группа>
						<Код>22</Код>
						<Наименование>ОсновныеСредства --&gt; ОсновныеСредства</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="ОсновныеСредства" Вид="ТабличнаяЧасть"/>
						<Приемник Имя="ОсновныеСредства" Вид="ТабличнаяЧасть"/>
						<Свойство>
							<Код>24</Код>
							<Наименование>Количество --&gt; Количество</Наименование>
							<Порядок>50</Порядок>
							<Источник Имя="Количество" Вид="Реквизит" Тип="Число"/>
							<Приемник Имя="Количество" Вид="Реквизит" Тип="Число"/>
						</Свойство>
						<Свойство>
							<Код>23</Код>
							<Наименование>ОсновноеСредство --&gt; ОсновноеСредство</Наименование>
							<Порядок>100</Порядок>
							<Источник Имя="ОсновноеСредство" Вид="Реквизит" Тип="СправочникСсылка.ОбъектыЭксплуатации"/>
							<Приемник Имя="ОсновноеСредство" Вид="Реквизит" Тип="СправочникСсылка.ОсновныеСредства"/>
						</Свойство>
					</Группа>
					<Свойство>
						<Код>25</Код>
						<Наименование>ВидДокумента --&gt; ВидОперации</Наименование>
						<Порядок>850</Порядок>
						<Источник Имя="ВидДокумента" Вид="Реквизит" Тип="ПеречислениеСсылка.ИГС_ВидыДокументаДвиженияЗабалансовыхМТР"/>
						<Приемник Имя="ВидОперации" Вид="Реквизит" Тип="ПеречислениеСсылка.игсВидыОперацийДвижениеЗабалансовыхМТР"/>
						<КодПравилаКонвертации>ВидыОперацийДвижениеЗабалансовыхМТР               </КодПравилаКонвертации>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Справочники</Код>
			<Наименование>Справочники</Наименование>
			<Порядок>100</Порядок>
			<Правило>
				<Код>Организации</Код>
				<Наименование>Справочник: Организации</Наименование>
				<Порядок>50</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.Организации</Источник>
				<Приемник>СправочникСсылка.Организации</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Номенклатура</Код>
				<Наименование>Справочник: Номенклатура</Наименование>
				<Порядок>100</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>СправочникСсылка.Номенклатура</Источник>
				<Приемник>СправочникСсылка.Номенклатура</Приемник>
				<Свойства>
					<Свойство Поиск="true" Обязательное="true">
						<Код>1</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Артикул --&gt; Артикул</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Артикул" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВидНоменклатуры --&gt; ВидНоменклатуры</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<Приемник Имя="ВидНоменклатуры" Вид="Реквизит" Тип="СправочникСсылка.ВидыНоменклатуры"/>
						<КодПравилаКонвертации>ВидыНоменклатуры                                  </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ЕдиницаИзмерения --&gt; ЕдиницаИзмерения</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.УпаковкиЕдиницыИзмерения"/>
						<Приемник Имя="ЕдиницаИзмерения" Вид="Реквизит" Тип="СправочникСсылка.КлассификаторЕдиницИзмерения"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Номенклатура"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>СА_КодОКДП --&gt; КодОКП</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="СА_КодОКДП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодОКП" Вид="Реквизит" Тип="СправочникСсылка.ОбщероссийскийКлассификаторПродукции"/>
						<КодПравилаКонвертации>КлассификаторОКПД2                                </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>СА_СсылкаНаЭталон --&gt; игсСсылкаНаЭталон</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="СА_СсылкаНаЭталон" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<Приемник Имя="игсСсылкаНаЭталон" Вид="Реквизит" Тип="СправочникСсылка.Номенклатура"/>
						<КодПравилаКонвертации>Номенклатура                                      </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>СА_КодКлассификатора --&gt; игсКодКлассификатора</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="СА_КодКлассификатора" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="игсКодКлассификатора" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>13</Код>
						<Наименование>СА_КогдаСоздана --&gt; игсКогдаСоздана</Наименование>
						<Порядок>650</Порядок>
						<Источник Имя="СА_КогдаСоздана" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="игсКогдаСоздана" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>14</Код>
						<Наименование>СА_Дубль --&gt; игсДубль</Наименование>
						<Порядок>700</Порядок>
						<Источник Имя="СА_Дубль" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="игсДубль" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>15</Код>
						<Наименование>СА_ДопТехническиеХарактеристики --&gt; игсДопТехническиеХарактеристики</Наименование>
						<Порядок>750</Порядок>
						<Источник Имя="СА_ДопТехническиеХарактеристики" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="игсДопТехническиеХарактеристики" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>16</Код>
						<Наименование>СА_ГОСТ_ТУ --&gt; игсГОСТТУ</Наименование>
						<Порядок>800</Порядок>
						<Источник Имя="СА_ГОСТ_ТУ" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="игсГОСТТУ" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ВидыНоменклатуры</Код>
				<Наименование>Справочник: Виды номенклатуры</Наименование>
				<Порядок>150</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ВидыНоменклатуры</Источник>
				<Приемник>СправочникСсылка.ВидыНоменклатуры</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ФизическиеЛица</Код>
				<Наименование>Справочник: Физические лица</Наименование>
				<Порядок>200</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ФизическиеЛица</Источник>
				<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Пол --&gt; Пол</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическогоЛица"/>
						<Приемник Имя="Пол" Вид="Реквизит" Тип="ПеречислениеСсылка.ПолФизическогоЛица"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>4</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ФизическиеЛица"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>6</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>НоменклатурныеГруппы</Код>
				<Наименование>Справочник: Группы аналитического учета номенклатуры</Наименование>
				<Порядок>250</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ГруппыАналитическогоУчетаНоменклатуры</Источник>
				<Приемник>СправочникСсылка.НоменклатурныеГруппы</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.ГруппыАналитическогоУчетаНоменклатуры"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.НоменклатурныеГруппы"/>
						<КодПравилаКонвертации>НоменклатурныеГруппы                              </КодПравилаКонвертации>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>4</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>5</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Пользователи</Код>
				<Наименование>Справочник: Пользователи</Наименование>
				<Порядок>300</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.Пользователи</Источник>
				<Приемник>СправочникСсылка.Пользователи</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Склады</Код>
				<Наименование>Справочник: Склады</Наименование>
				<Порядок>350</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.Склады</Источник>
				<Приемник>СправочникСсылка.Склады</Приемник>
				<Свойства>
					<Свойство Обязательное="true">
						<Код>1</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>Родитель --&gt; Родитель</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
						<Приемник Имя="Родитель" Вид="Свойство" Тип="СправочникСсылка.Склады"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Подразделение --&gt; ПодразделениеОрганизации</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="Подразделение" Вид="Реквизит" Тип="СправочникСсылка.СтруктураПредприятия"/>
						<Приемник Имя="ПодразделениеОрганизации" Вид="Реквизит" Тип="СправочникСсылка.ПодразделенияОрганизаций"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Контрагенты</Код>
				<Наименование>Справочник: Контрагенты</Наименование>
				<Порядок>400</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.Контрагенты</Источник>
				<Приемник>СправочникСсылка.Контрагенты</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>ГоловнойКонтрагент --&gt; ГоловнойКонтрагент</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="ГоловнойКонтрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<Приемник Имя="ГоловнойКонтрагент" Вид="Реквизит" Тип="СправочникСсылка.Контрагенты"/>
						<КодПравилаКонвертации>Контрагенты                                       </КодПравилаКонвертации>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ИНН --&gt; ИНН</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="ИНН" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>КодПоОКПО --&gt; КодПоОКПО</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КодПоОКПО" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>КПП --&gt; КПП</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="КПП" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>НаименованиеПолное --&gt; НаименованиеПолное</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="НаименованиеПолное" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>ОбособленноеПодразделение --&gt; ОбособленноеПодразделение</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="ОбособленноеПодразделение" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="ОбособленноеПодразделение" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>7</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ДоговорыКонтрагентов</Код>
				<Наименование>Справочник: Договоры с контрагентами</Наименование>
				<Порядок>450</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ДоговорыКонтрагентов</Источник>
				<Приемник>СправочникСсылка.ДоговорыКонтрагентов</Приемник>
				<Свойства>
					<Свойство Отключить="true">
						<Код>1</Код>
						<Наименование>--&gt;</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="" Вид=""/>
					</Свойство>
					<Свойство Поиск="true" Обязательное="true">
						<Код>2</Код>
						<Наименование>--&gt; ЭтоГруппа</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>3</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>4</Код>
						<Наименование>ВалютаВзаиморасчетов --&gt; ВалютаВзаиморасчетов</Наименование>
						<Порядок>200</Порядок>
						<Источник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
						<Приемник Имя="ВалютаВзаиморасчетов" Вид="Реквизит" Тип="СправочникСсылка.Валюты"/>
					</Свойство>
					<Свойство>
						<Код>5</Код>
						<Наименование>ВидАгентскогоДоговора --&gt; ВидАгентскогоДоговора</Наименование>
						<Порядок>250</Порядок>
						<Источник Имя="ВидАгентскогоДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыАгентскихДоговоров"/>
						<Приемник Имя="ВидАгентскогоДоговора" Вид="Реквизит" Тип="ПеречислениеСсылка.ВидыАгентскихДоговоров"/>
					</Свойство>
					<Свойство>
						<Код>6</Код>
						<Наименование>Дата --&gt; Дата</Наименование>
						<Порядок>300</Порядок>
						<Источник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
						<Приемник Имя="Дата" Вид="Реквизит" Тип="Дата"/>
					</Свойство>
					<Свойство>
						<Код>7</Код>
						<Наименование>Комментарий --&gt; Комментарий</Наименование>
						<Порядок>350</Порядок>
						<Источник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Комментарий" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>8</Код>
						<Наименование>Номер --&gt; Номер</Наименование>
						<Порядок>400</Порядок>
						<Источник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
						<Приемник Имя="Номер" Вид="Реквизит" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>9</Код>
						<Наименование>Организация --&gt; Организация</Наименование>
						<Порядок>450</Порядок>
						<Источник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Организация" Вид="Реквизит" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство>
						<Код>10</Код>
						<Наименование>УчетАгентскогоНДС --&gt; УчетАгентскогоНДС</Наименование>
						<Порядок>500</Порядок>
						<Источник Имя="УчетАгентскогоНДС" Вид="Реквизит" Тип="Булево"/>
						<Приемник Имя="УчетАгентскогоНДС" Вид="Реквизит" Тип="Булево"/>
					</Свойство>
					<Свойство>
						<Код>11</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>550</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>12</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>600</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ПодразделенияОрганизаций</Код>
				<Наименование>Справочник: Подразделения организаций</Наименование>
				<Порядок>500</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ПодразделенияОрганизаций</Источник>
				<Приемник>СправочникСсылка.ПодразделенияОрганизаций</Приемник>
				<Свойства>
					<Свойство Отключить="true">
						<Код>1</Код>
						<Наименование>Владелец --&gt; Владелец</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
						<Приемник Имя="Владелец" Вид="Свойство" Тип="СправочникСсылка.Организации"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>3</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СтруктураПредприятия</Код>
				<Наименование>Справочник: Структура предприятия</Наименование>
				<Порядок>550</Порядок>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<Источник>СправочникСсылка.СтруктураПредприятия</Источник>
				<Приемник>СправочникСсылка.ПодразделенияОрганизаций</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОтветственныеВФизЛица</Код>
				<Наименование>Справочник: Ответственные лица организаций</Наименование>
				<Порядок>600</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ОтветственныеЛицаОрганизаций</Источник>
				<Приемник>СправочникСсылка.ФизическиеЛица</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>ПометкаУдаления --&gt; ПометкаУдаления</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ПометкаУдаления" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>ОсновныеСредстваОбъектыЭксплуатации</Код>
				<Наименование>Справочник: Объекты эксплуатации</Наименование>
				<Порядок>650</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.ОбъектыЭксплуатации</Источник>
				<Приемник>СправочникСсылка.ОсновныеСредства</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Обязательное="true">
						<Код>3</Код>
						<Наименование>ЭтоГруппа --&gt; ЭтоГруппа</Наименование>
						<Порядок>150</Порядок>
						<Источник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
						<Приемник Имя="ЭтоГруппа" Вид="Свойство" Тип="Булево"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>Валюты</Код>
				<Наименование>Справочник: Валюты</Наименование>
				<Порядок>700</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>true</ПриПереносеОбъектаПоСсылкеУстанавливатьТолькоGIUD>
				<Источник>СправочникСсылка.Валюты</Источник>
				<Приемник>СправочникСсылка.Валюты</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>КлассификаторОКПД2</Код>
				<Наименование>Строка: Строка</Наименование>
				<Порядок>750</Порядок>
				<Приемник>СправочникСсылка.КлассификаторОКПД2</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>--&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
					</Свойство>
					<Свойство>
						<Код>2</Код>
						<Наименование>--&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="" Вид=""/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Значение = Источник;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
			<Правило>
				<Код>СтатьиЗатрат</Код>
				<Наименование>План видов характеристик: СтатьиРасходов</Наименование>
				<Порядок>850</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<СинхронизироватьПоИдентификатору>true</СинхронизироватьПоИдентификатору>
				<ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>true</ПродолжитьПоискПоПолямПоискаЕслиПоИдентификаторуНеНашли>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>ПланВидовХарактеристикСсылка.СтатьиРасходов</Источник>
				<Приемник>СправочникСсылка.СтатьиЗатрат</Приемник>
				<Свойства>
					<Свойство>
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
					</Свойство>
					<Свойство Поиск="true">
						<Код>2</Код>
						<Наименование>Наименование --&gt; Наименование</Наименование>
						<Порядок>100</Порядок>
						<Источник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Наименование" Вид="Свойство" Тип="Строка"/>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Планы счетов</Код>
			<Наименование>Планы счетов</Наименование>
			<Порядок>150</Порядок>
			<Правило>
				<Код>Хозрасчетный</Код>
				<Наименование>План счетов: План счетов бухгалтерского учета</Наименование>
				<Порядок>50</Порядок>
				<НеЗамещать>true</НеЗамещать>
				<НеСоздаватьЕслиНеНайден>true</НеСоздаватьЕслиНеНайден>
				<Источник>ПланСчетовСсылка.Хозрасчетный</Источник>
				<Приемник>ПланСчетовСсылка.Хозрасчетный</Приемник>
				<Свойства>
					<Свойство Поиск="true">
						<Код>1</Код>
						<Наименование>Код --&gt; Код</Наименование>
						<Порядок>50</Порядок>
						<Источник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<Приемник Имя="Код" Вид="Свойство" Тип="Строка"/>
						<ПередВыгрузкой>Если Источник.Код = "08.04.1" или Источник.Код = "08.04.2" Тогда
	Значение = "08.04";
КонецЕсли;</ПередВыгрузкой>
					</Свойство>
				</Свойства>
				<Значения/>
			</Правило>
		</Группа>
		<Группа>
			<Код>Перечисления</Код>
			<Наименование>Перечисления</Наименование>
			<Порядок>200</Порядок>
			<Правило>
				<Код>СтавкиНДС</Код>
				<Наименование>Перечисление: Ставки НДС</Наименование>
				<Порядок>50</Порядок>
				<Источник>ПеречислениеСсылка.СтавкиНДС</Источник>
				<Приемник>ПеречислениеСсылка.СтавкиНДС</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БезНДС --&gt; БезНДС</Наименование>
						<Порядок>50</Порядок>
						<Источник>БезНДС</Источник>
						<Приемник>БезНДС</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>НДС0 --&gt; НДС0</Наименование>
						<Порядок>100</Порядок>
						<Источник>НДС0</Источник>
						<Приемник>НДС0</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>НДС10 --&gt; НДС10</Наименование>
						<Порядок>150</Порядок>
						<Источник>НДС10</Источник>
						<Приемник>НДС10</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>НДС10_110 --&gt; НДС10_110</Наименование>
						<Порядок>200</Порядок>
						<Источник>НДС10_110</Источник>
						<Приемник>НДС10_110</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>НДС18 --&gt; НДС18</Наименование>
						<Порядок>250</Порядок>
						<Источник>НДС18</Источник>
						<Приемник>НДС18</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>НДС18_118 --&gt; НДС18_118</Наименование>
						<Порядок>300</Порядок>
						<Источник>НДС18_118</Источник>
						<Приемник>НДС18_118</Приемник>
					</Значение>
					<Значение>
						<Код>7</Код>
						<Наименование>НДС20 --&gt; НДС20</Наименование>
						<Порядок>350</Порядок>
						<Источник>НДС20</Источник>
						<Приемник>НДС20</Приемник>
					</Значение>
					<Значение>
						<Код>8</Код>
						<Наименование>НДС20_120 --&gt; НДС20_120</Наименование>
						<Порядок>400</Порядок>
						<Источник>НДС20_120</Источник>
						<Приемник>НДС20_120</Приемник>
					</Значение>
					<Значение>
						<Код>9</Код>
						<Наименование>НДС5 --&gt; НДС5</Наименование>
						<Порядок>450</Порядок>
						<Источник>НДС5</Источник>
						<Приемник>НДС5</Приемник>
					</Значение>
					<Значение>
						<Код>10</Код>
						<Наименование>НДС5_105 --&gt; НДС5_105</Наименование>
						<Порядок>500</Порядок>
						<Источник>НДС5_105</Источник>
						<Приемник>НДС5_105</Приемник>
					</Значение>
					<Значение>
						<Код>11</Код>
						<Наименование>НДС7 --&gt; НДС7</Наименование>
						<Порядок>550</Порядок>
						<Источник>НДС7</Источник>
						<Приемник>НДС7</Приемник>
					</Значение>
					<Значение>
						<Код>12</Код>
						<Наименование>НДС7_107 --&gt; НДС7_107</Наименование>
						<Порядок>600</Порядок>
						<Источник>НДС7_107</Источник>
						<Приемник>НДС7_107</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыОперацийДвижениеЗабалансовыхМТР</Код>
				<Наименование>Перечисление: Виды документа движения забалансовых МТР (ИГС)</Наименование>
				<Порядок>750</Порядок>
				<Источник>ПеречислениеСсылка.ИГС_ВидыДокументаДвиженияЗабалансовыхМТР</Источник>
				<Приемник>ПеречислениеСсылка.игсВидыОперацийДвижениеЗабалансовыхМТР</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>БуровыеИКомплектующие --&gt; БуровыеИКомплектующие</Наименование>
						<Порядок>50</Порядок>
						<Источник>БуровыеИКомплектующие</Источник>
						<Приемник>БуровыеИКомплектующие</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>МатериалыВозвратИзЭксплуатации --&gt; ВозвращенныеИзЭ</Наименование>
						<Порядок>100</Порядок>
						<Источник>МатериалыВозвратИзЭксплуатации</Источник>
						<Приемник>ВозвращенныеИзЭксплуатации</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>МатериалыПринятыеВПереработкуВПроизводстве --&gt; При</Наименование>
						<Порядок>150</Порядок>
						<Источник>МатериалыПринятыеВПереработкуВПроизводстве</Источник>
						<Приемник>ПринятыеВПереработкуВПроизводстве</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>МатериалыПринятыеВПереработкуНаСкладе --&gt; Принятые</Наименование>
						<Порядок>200</Порядок>
						<Источник>МатериалыПринятыеВПереработкуНаСкладе</Источник>
						<Приемник>ПринятыеВПереработку</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>МТРАрендаЛизинг --&gt; МТРВАрендеИВЛизинге</Наименование>
						<Порядок>250</Порядок>
						<Источник>МТРАрендаЛизинг</Источник>
						<Приемник>МТРВАрендеИВЛизинге</Приемник>
					</Значение>
					<Значение>
						<Код>6</Код>
						<Наименование>МТРОтветХранение --&gt; МТРНаОтветственномХранении</Наименование>
						<Порядок>300</Порядок>
						<Источник>МТРОтветХранение</Источник>
						<Приемник>МТРНаОтветственномХранении</Приемник>
					</Значение>
				</Значения>
			</Правило>
			<Правило>
				<Код>ВидыДвижений</Код>
				<Наименование>Перечисление: Виды операций движения забалансовых МТР (ИГС)</Наименование>
				<Порядок>800</Порядок>
				<Источник>ПеречислениеСсылка.ИГС_ВидыОперацийДвиженияЗабалансовыхМТР</Источник>
				<Приемник>ПеречислениеСсылка.игсВидыДвижений</Приемник>
				<Свойства/>
				<Значения>
					<Значение>
						<Код>1</Код>
						<Наименование>Возврат --&gt; Возврат</Наименование>
						<Порядок>50</Порядок>
						<Источник>Возврат</Источник>
						<Приемник>Возврат</Приемник>
					</Значение>
					<Значение>
						<Код>2</Код>
						<Наименование>Перемещение --&gt; Перемещение</Наименование>
						<Порядок>100</Порядок>
						<Источник>Перемещение</Источник>
						<Приемник>Перемещение</Приемник>
					</Значение>
					<Значение>
						<Код>3</Код>
						<Наименование>Приход --&gt; Приход</Наименование>
						<Порядок>150</Порядок>
						<Источник>Приход</Источник>
						<Приемник>Приход</Приемник>
					</Значение>
					<Значение>
						<Код>4</Код>
						<Наименование>Расход --&gt; Расход</Наименование>
						<Порядок>200</Порядок>
						<Источник>Расход</Источник>
						<Приемник>Расход</Приемник>
					</Значение>
					<Значение>
						<Код>5</Код>
						<Наименование>Претензия --&gt; Расход</Наименование>
						<Порядок>250</Порядок>
						<Источник>Претензия</Источник>
						<Приемник>Расход</Приемник>
					</Значение>
				</Значения>
			</Правило>
		</Группа>
	</ПравилаКонвертацииОбъектов>
	<ПравилаВыгрузкиДанных>
		<Группа Отключить="false">
			<Код>Документы</Код>
			<Наименование>Документы</Наименование>
			<Порядок>50</Порядок>
			<Правило Отключить="false">
				<Код>ПоступлениеТоваровУслуг</Код>
				<Наименование>ПриобретениеТоваровУслуг</Наименование>
				<Порядок>50</Порядок>
				<КодПравилаКонвертации>ПоступлениеТоваровУслуг                           </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПриобретениеТоваровУслуг</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПеремещениеТоваров</Код>
				<Наименование>ПеремещениеТоваров</Наименование>
				<Порядок>100</Порядок>
				<КодПравилаКонвертации>ПеремещениеТоваров                                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПеремещениеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПеремещениеОС</Код>
				<Наименование>ПеремещениеОС2_4</Наименование>
				<Порядок>150</Порядок>
				<КодПравилаКонвертации>ПеремещениеОС                                     </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПеремещениеОС2_4</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПередачаМатериаловВЭксплуатацию</Код>
				<Наименование>ВнутреннееПотреблениеТоваров</Наименование>
				<Порядок>200</Порядок>
				<КодПравилаКонвертации>ПередачаМатериаловВЭксплуатацию                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ВнутреннееПотреблениеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ВозвратМатериаловИзЭксплуатации</Код>
				<Наименование>ПрочееОприходованиеТоваров</Наименование>
				<Порядок>250</Порядок>
				<КодПравилаКонвертации>ВозвратМатериаловИзЭксплуатации                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПрочееОприходованиеТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СписаниеМатериаловИзЭксплуатации</Код>
				<Наименование>СписаниеИзЭксплуатации</Наименование>
				<Порядок>300</Порядок>
				<КодПравилаКонвертации>СписаниеМатериаловИзЭксплуатации                  </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СписаниеИзЭксплуатации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ПеремещениеМатериаловВЭксплуатации</Код>
				<Наименование>ПеремещениеВЭксплуатации</Наименование>
				<Порядок>350</Порядок>
				<КодПравилаКонвертации>ПеремещениеМатериаловВЭксплуатации                </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ПеремещениеВЭксплуатации</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>СписаниеТоваров</Код>
				<Наименование>СписаниеНедостачТоваров</Наименование>
				<Порядок>400</Порядок>
				<КодПравилаКонвертации>СписаниеТоваров                                   </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СписаниеНедостачТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ОприходованиеТоваров</Код>
				<Наименование>ОприходованиеИзлишковТоваров</Наименование>
				<Порядок>450</Порядок>
				<КодПравилаКонвертации>ОприходованиеТоваров                              </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ОприходованиеИзлишковТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>КомплектацияНоменклатуры</Код>
				<Наименование>СборкаТоваров</Наименование>
				<Порядок>500</Порядок>
				<КодПравилаКонвертации>КомплектацияНоменклатуры                          </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СборкаТоваров</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>РеализацияТоваровУслуг</Код>
				<Наименование>РеализацияТоваровУслуг</Наименование>
				<Порядок>550</Порядок>
				<КодПравилаКонвертации>РеализацияТоваровУслуг                            </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.РеализацияТоваровУслуг</ОбъектВыборки>
				<ПередВыгрузкойОбъекта> 
СчетаФактуры = Документы.СчетФактураВыданный.СчетаФактурыПоОснованию(Объект.Ссылка);

Для каждого текДокумент Из СчетаФактуры Цикл
	СчетФактура = текДокумент.Ссылка.ПолучитьОбъект();
	ВыгрузитьПоПравилу(СчетФактура, , ,, "СчетФактураВыданный");
КонецЦикла;</ПередВыгрузкойОбъекта>
			</Правило>
			<Правило Отключить="false">
				<Код>СчетФактураВыданный</Код>
				<Наименование>СчетФактураВыданный</Наименование>
				<Порядок>600</Порядок>
				<КодПравилаКонвертации>СчетФактураВыданный                               </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.СчетФактураВыданный</ОбъектВыборки>
			</Правило>
			<Правило Отключить="false">
				<Код>ИГС_ДвижениеЗабалансовыхМТР</Код>
				<Наименование>ИГС_ДвижениеЗабалансовыхМТР</Наименование>
				<Порядок>650</Порядок>
				<КодПравилаКонвертации>игсДвижениеЗабалансовыхМТР                        </КодПравилаКонвертации>
				<СпособОтбораДанных>СтандартнаяВыборка</СпособОтбораДанных>
				<ОбъектВыборки>ДокументСсылка.ИГС_ДвижениеЗабалансовыхМТР</ОбъектВыборки>
			</Правило>
		</Группа>
	</ПравилаВыгрузкиДанных>
	<ПравилаОчисткиДанных/>
	<Алгоритмы>
		<Алгоритм Имя="ВывестиОшибкиПриемника" ИспользуетсяПриЗагрузке="true">
			<Текст>
Источник 		= "ERP МТО";
Комментарий 	= "";
Если Параметры.СохранитьОшибкиВФайл или Параметры.ПередатьОшибкиПоПочте Тогда  
	ПараметрУникальностиИмениФайла = "";
	ТипФайлаИмя = ".xls";
	
	ИмяФайла = "download_errors" + ТипФайлаИмя;
	ПолноеИмяФайлаОшибок 	= Параметры.КаталогХранилища + ?(Прав(Параметры.КаталогХранилища, 1) = "\", "", "\") + ИмяФайла;
	
ТабДокумент = Новый ТабличныйДокумент;
Построитель = Новый ПостроительОтчета;
Построитель.ИсточникДанных = Новый ОписаниеИсточникаДанных(Параметры.ТаблицаОшибок);       
Построитель.Вывести(ТабДокумент);  
ТабДокумент.Записать(ПолноеИмяФайлаОшибок,ТипФайлаТабличногоДокумента.XLS97);
	
	
	Если Параметры.ПередатьОшибкиПоПочте Тогда
		ТелоПисьма = "";
		ТелоПисьма = ТелоПисьма + Символы.ПС + Символы.ПС; 
		ТелоПисьма = ТелоПисьма+"&lt;br&gt;"+Символы.ПС+"&lt;br&gt;";
		ТелоПисьма = ТелоПисьма + "Ошибки загрузки!" + Символы.ПС;
		ТелоПисьма = ТелоПисьма + "Не удалось загрузить следующие документы:" + Символы.ПС;
		Сч = 1;
		
		ТелоПисьма = ТелоПисьма+"&lt;table border='2px'&gt;&lt;th&gt;Тип ошибки&lt;/th&gt;&lt;th&gt;Документ источник&lt;/th&gt;&lt;th&gt;Описание ошибки&lt;/th&gt;";
		Итератор = 0;
		
		Для каждого СтрокаТЗ Из Параметры.ТаблицаОшибок Цикл
			
			Если Итератор = 1 тогда
				Итератор =0;
				ЦветЯчеек = "";
			Иначе 
				ЦветЯчеек = " bgcolor=""#d8d8d8""";
				Итератор = 1;
			КонецЕсли;
			ТелоПисьма = ТелоПисьма + "&lt;tr&gt;";
			ТелоПисьма = ТелоПисьма + "&lt;td"+ЦветЯчеек+"&gt;" + СтрокаТЗ.ТипОшибки + "&lt;/td&gt;";
			ТелоПисьма = ТелоПисьма + "&lt;td"+ЦветЯчеек+"&gt;" + СтрокаТЗ.ДокументИсточник + "&lt;/td&gt;";
			ТелоПисьма = ТелоПисьма + "&lt;td"+ЦветЯчеек+"&gt;" + СтрокаТЗ.ОписаниеОшибки + "&lt;/td&gt;";
			ТелоПисьма = ТелоПисьма + "&lt;/tr&gt;";
			
		КонецЦикла;
		
		//авт_общегоНазначения.ОтправкаУведомлений(ТелоПисьма,ПолноеИмяФайлаОшибок);
		//МассивПолучатели = Новый Массив;
		//МассивПолучатели.Добавить("1C_Support@ingeos.ru");
		//авт_общегоНазначения.ОтправкаУведомлений(ТелоПисьма,1, МассивПолучатели);		
	КонецЕсли;
	
КонецЕсли;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ЗаписьВРегистрУНЭПД" ИспользуетсяПриЗагрузке="true">
			<Текст>//Запись в РС игсУчетНаличияЭкземпляровПервичныхДокументов
//МенеджерРегистра = РегистрыСведений.игсУчетНаличияЭкземпляровПервичныхДокументов.СоздатьМенеджерЗаписи();
//МенеджерРегистра.Документ = Документ;
//МенеджерРегистра.ВидЭкземпляра = ВидЭкземпляра; 
//МенеджерРегистра.Записать();       

НаборЗаписей = РегистрыСведений.игсУчетНаличияЭкземпляровПервичныхДокументов.СоздатьНаборЗаписей();
НаборЗаписей.Отбор.Документ.Установить(Документ);
НаборЗаписей.Прочитать();
НаборЗаписей.Очистить();
НоваяЗапись = НаборЗаписей.Добавить();
НоваяЗапись.Документ = Документ;
НоваяЗапись.ВидЭкземпляра = ВидЭкземпляра;
НаборЗаписей.ОбменДанными.Загрузка = Истина;
НаборЗаписей.Записать();</Текст>
		</Алгоритм>
		<Алгоритм Имя="ЗаписьДокумента" ИспользуетсяПриЗагрузке="true">
			<Текст>Попытка    
	Объект.Записать(РежимЗаписиДокумента.Запись);
	СтрокаПроведения = Параметры.ТаблицаПроведения.Добавить();
	СтрокаПроведения.Ссылка = Объект.Ссылка;
Исключение
	Объект.Записать(РежимЗаписиДокумента.Запись);
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Запись";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= ОписаниеОшибки();
	Отказ = Истина;
КонецПопытки;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ЗаписьДокументаПроведение" ИспользуетсяПриЗагрузке="true">
			<Текст>
Попытка 
		Объект.Записать(РежимЗаписиДокумента.Проведение);
Исключение
	Объект.Записать(РежимЗаписиДокумента.Запись);
	СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
	СтрокаОшибки.ТипОшибки				= "Проведение";
	СтрокаОшибки.ДокументИсточник		= Объект;
	СтрокаОшибки.ОписаниеОшибки			= ОписаниеОшибки();
	Отказ = Истина;
КонецПопытки;</Текст>
		</Алгоритм>
		<Алгоритм Имя="ЗаполнитьНазначение" ИспользуетсяПриЗагрузке="true">
			<Текст>СоответствиеСчетаЕРПиУСО = Новый Соответствие;
СоответствиеСчетаЕРПиУСО.Вставить("20",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("20.01"));
СоответствиеСчетаЕРПиУСО.Вставить("23",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("23.01"));
СоответствиеСчетаЕРПиУСО.Вставить("25",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("25"));
СоответствиеСчетаЕРПиУСО.Вставить("26",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("26"));
//СоответствиеСчетаЕРПиУСО.Вставить("91.02", ПланыСчетов.Хозрасчетный.НайтиПоКоду("91.02"));

СчетЗатратУСО = СоответствиеСчетаЕРПиУСО.Получить(СчетЗатрат);

Запрос = Новый Запрос;   
Если СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("25") Или СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("26") Тогда
Запрос.Текст =
"ВЫБРАТЬ
|	НазначенияИспользования.Ссылка
|ИЗ
|	Справочник.НазначенияИспользованияНоменклатуры КАК НазначенияИспользования
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.СпособыОтраженияРасходовПоАмортизации.Способы КАК СпособыОтраженияРасходовПоАмортизацииСпособы
|		ПО НазначенияИспользования.СпособОтраженияРасходов = СпособыОтраженияРасходовПоАмортизацииСпособы.Ссылка
|ГДЕ
|	СпособыОтраженияРасходовПоАмортизацииСпособы.НомерСтроки = 1
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.СчетЗатрат = &amp;СчетЗатрат   
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.ПодразделениеОрганизации = &amp;ПодразделениеОрганизации
|	И НазначенияИспользования.СпособПогашенияСтоимости = &amp;СпособПогашенияСтоимости
|	И НазначенияИспользования.СрокПолезногоИспользования = &amp;СрокПолезногоИспользования
|	И НазначенияИспользования.Владелец = &amp;Владелец                                                    
|	И НЕ НазначенияИспользования.ПометкаУдаления";

ИначеЕсли СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("20.01") Или СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("23.01") Тогда
Запрос.Текст =
 "ВЫБРАТЬ
|	НазначенияИспользования.Ссылка КАК Ссылка
|ИЗ
|	Справочник.НазначенияИспользованияНоменклатуры КАК НазначенияИспользования
|		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.СпособыОтраженияРасходовПоАмортизации.Способы КАК СпособыОтраженияРасходовПоАмортизацииСпособы
|		ПО НазначенияИспользования.СпособОтраженияРасходов = СпособыОтраженияРасходовПоАмортизацииСпособы.Ссылка
|ГДЕ
|	СпособыОтраженияРасходовПоАмортизацииСпособы.НомерСтроки = 1
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.Субконто1 = &amp;СтатьяЗатрат
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.Субконто2 = &amp;НоменклатурнаяГруппа
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.ПодразделениеОрганизации = &amp;ПодразделениеОрганизации
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.СчетЗатрат = &amp;СчетЗатрат
|	И НазначенияИспользования.СпособПогашенияСтоимости = &amp;СпособПогашенияСтоимости
|	И НазначенияИспользования.СрокПолезногоИспользования = &amp;СрокПолезногоИспользования
|	И НазначенияИспользования.Владелец = &amp;Владелец
|	И НЕ НазначенияИспользования.ПометкаУдаления";

КонецЕсли;

Запрос.УстановитьПараметр("ПодразделениеОрганизации", ПодразделениеНазначения);
Запрос.УстановитьПараметр("СчетЗатрат", СчетЗатратУСО);
Запрос.УстановитьПараметр("СрокПолезногоИспользования", Число(СрокПолезногоИспользования));
Запрос.УстановитьПараметр("Владелец", Строка.Номенклатура);  
Запрос.УстановитьПараметр("НоменклатурнаяГруппа", НоменклатурнаяГруппа);
Запрос.УстановитьПараметр("СтатьяЗатрат", СтатьяЗатрат);

Если СпособПогашенияСтоимости = "Линейный" Тогда 
	Запрос.УстановитьПараметр("СпособПогашенияСтоимости", Перечисления.СпособыПогашенияСтоимости.Линейный);
Иначе
	Запрос.УстановитьПараметр("СпособПогашенияСтоимости", Перечисления.СпособыПогашенияСтоимости.ПогашатьСтоимостьПриПередачеВЭксплуатацию);
КонецЕсли;

РезультатЗапроса = Запрос.Выполнить();
Выборка = РезультатЗапроса.Выбрать();

Если Выборка.Следующий() Тогда
	
	Строка.НазначениеИспользования = Выборка.Ссылка;
	
Иначе
	
	СпособОтраженияНов = Справочники.СпособыОтраженияРасходовПоАмортизации.СоздатьЭлемент();
	СпособОтраженияНов.Организация  = Объект.Организация; 
	СпособОтраженияНов.Комментарий  = "создан автоматически при выгрузке из ЕРП";  
	СпособОтраженияНов.Наименование = Строка(СтатьяЗатрат)+" (счет " + Строка(СчетЗатратУСО)+")";

	ТЧСпособ = СпособОтраженияНов.Способы.Добавить();
	ТЧСпособ.ПодразделениеОрганизации = ПодразделениеНазначения;
	ТЧСпособ.Коэффициент = 1;
	ТЧСпособ.СчетЗатрат = СчетЗатратУСО;
	
	Если СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("25") Или СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("26") Тогда
    ТЧСпособ.Субконто1 = СтатьяЗатрат;  
	ИначеЕсли СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("23.01") Или СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("20.01") Тогда
     ТЧСпособ.Субконто1 = НоменклатурнаяГруппа;
	 ТЧСпособ.Субконто2 = СтатьяЗатрат;
	КонецЕсли;
	
	СпособОтраженияНов.Записать();
	СпособОтражения = СпособОтраженияНов.Ссылка;  
	
	НовоеНазначение 							= Справочники.НазначенияИспользованияНоменклатуры.СоздатьЭлемент();
	НовоеНазначение.Владелец 					= Строка.Номенклатура; 
	НовоеНазначение.СрокПолезногоИспользования	= СрокПолезногоИспользования;
	НовоеНазначение.Количество = 1;
	НовоеНазначение.СпособОтраженияРасходов = СпособОтражения;
	НовоеНазначение.Наименование = Строка(Строка.Номенклатура) + ?(ЗначениеЗаполнено(СрокПолезногоИспользования)," - " + Строка(СрокПолезногоИспользования),"");
	
	Если СпособПогашенияСтоимости = "Линейный" Тогда 
		НовоеНазначение.СпособПогашенияСтоимости = Перечисления.СпособыПогашенияСтоимости.Линейный;
	Иначе
		НовоеНазначение.СпособПогашенияСтоимости = Перечисления.СпособыПогашенияСтоимости.ПогашатьСтоимостьПриПередачеВЭксплуатацию;
	КонецЕсли;
	
	НовоеНазначение.Записать();
	Назначение = НовоеНазначение.Ссылка;
	Строка.НазначениеИспользования = Назначение;  
	
КонецЕсли;</Текст>
			<Параметры>Строка, Объект, СтатьяЗатрат, СчетЗатрат, СпособПогашенияСтоимости, СрокПолезногоИспользования, ПодразделениеНазначения, НоменклатурнаяГруппа</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ЗаполнитьСпособОтраженияРасходов" ИспользуетсяПриЗагрузке="true">
			<Текст>СоответствиеСчетаЕРПиУСО = Новый Соответствие;
СоответствиеСчетаЕРПиУСО.Вставить("20",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("20.01"));
СоответствиеСчетаЕРПиУСО.Вставить("23",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("23.01"));
СоответствиеСчетаЕРПиУСО.Вставить("25",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("25"));
СоответствиеСчетаЕРПиУСО.Вставить("26",    ПланыСчетов.Хозрасчетный.НайтиПоКоду("26"));
СоответствиеСчетаЕРПиУСО.Вставить("91.02", ПланыСчетов.Хозрасчетный.НайтиПоКоду("91.02"));

СчетЗатратУСО = СоответствиеСчетаЕРПиУСО.Получить(СчетЗатрат);

Запрос = Новый Запрос;   
Если СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("25") Или СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("26") Тогда
Запрос.Текст =
  "ВЫБРАТЬ
|	СпособыОтраженияРасходовПоАмортизации.Ссылка КАК Ссылка
|ИЗ
|	Справочник.СпособыОтраженияРасходовПоАмортизации.Способы КАК СпособыОтраженияРасходовПоАмортизацииСпособы
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.СпособыОтраженияРасходовПоАмортизации КАК СпособыОтраженияРасходовПоАмортизации
|		ПО СпособыОтраженияРасходовПоАмортизацииСпособы.Ссылка = СпособыОтраженияРасходовПоАмортизации.Ссылка
|ГДЕ
|	СпособыОтраженияРасходовПоАмортизацииСпособы.НомерСтроки = 1
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.Субконто1 = &amp;СтатьяЗатрат
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.ПодразделениеОрганизации = &amp;ПодразделениеОрганизации
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.СчетЗатрат = &amp;СчетЗатрат
|	И СпособыОтраженияРасходовПоАмортизации.Организация = &amp;Организация
|	И НЕ СпособыОтраженияРасходовПоАмортизации.ПометкаУдаления";


ИначеЕсли СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("20.01") Или СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("23.01") Тогда
Запрос.Текст =
  "ВЫБРАТЬ
|	СпособыОтраженияРасходовПоАмортизации.Ссылка КАК Ссылка
|ИЗ
|	Справочник.СпособыОтраженияРасходовПоАмортизации.Способы КАК СпособыОтраженияРасходовПоАмортизацииСпособы
|		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.СпособыОтраженияРасходовПоАмортизации КАК СпособыОтраженияРасходовПоАмортизации
|		ПО СпособыОтраженияРасходовПоАмортизацииСпособы.Ссылка = СпособыОтраженияРасходовПоАмортизации.Ссылка
|ГДЕ
|	СпособыОтраженияРасходовПоАмортизацииСпособы.НомерСтроки = 1
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.Субконто1 = &amp;СтатьяЗатрат
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.Субконто2 = &amp;НоменклатурнаяГруппа
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.ПодразделениеОрганизации = &amp;ПодразделениеОрганизации
|	И СпособыОтраженияРасходовПоАмортизацииСпособы.СчетЗатрат = &amp;СчетЗатрат
|	И СпособыОтраженияРасходовПоАмортизации.Организация = &amp;Организация
|	И НЕ СпособыОтраженияРасходовПоАмортизации.ПометкаУдаления";
КонецЕсли;

Запрос.УстановитьПараметр("ПодразделениеОрганизации", ПодразделениеНазначения);
Запрос.УстановитьПараметр("СчетЗатрат", СчетЗатратУСО); 
Запрос.УстановитьПараметр("НоменклатурнаяГруппа", НоменклатурнаяГруппа);
Запрос.УстановитьПараметр("СтатьяЗатрат", СтатьяЗатрат);
Запрос.УстановитьПараметр("Организация", Организация);

РезультатЗапроса = Запрос.Выполнить();
Выборка = РезультатЗапроса.Выбрать();

Если Выборка.Следующий() Тогда
	
	Строка.СпособОтраженияРасходов = Выборка.Ссылка;
	
Иначе
	
	СпособОтраженияНов = Справочники.СпособыОтраженияРасходовПоАмортизации.СоздатьЭлемент();
	СпособОтраженияНов.Организация  = Объект.Организация; 
	СпособОтраженияНов.Комментарий  = "создан автоматически при выгрузке из ЕРП";  
	СпособОтраженияНов.Наименование = Строка(СтатьяЗатрат)+" (счет " + Строка(СчетЗатратУСО)+")";

	ТЧСпособ = СпособОтраженияНов.Способы.Добавить();
	ТЧСпособ.ПодразделениеОрганизации = ПодразделениеНазначения;
	ТЧСпособ.Коэффициент = 1;
	ТЧСпособ.СчетЗатрат = СчетЗатратУСО;
	
	Если СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("25") Или СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("26") Тогда
    ТЧСпособ.Субконто1 = СтатьяЗатрат;  
	ИначеЕсли СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("23.01") Тогда
     ТЧСпособ.Субконто1 = НоменклатурнаяГруппа;
	 ТЧСпособ.Субконто2 = СтатьяЗатрат;
	 ИначеЕсли СчетЗатратУСО = ПланыСчетов.Хозрасчетный.НайтиПоКоду("20.01") Тогда
     ТЧСпособ.Субконто1 = НоменклатурнаяГруппа;
	 ТЧСпособ.Субконто2 = СтатьяЗатрат;  
	 ТЧСпособ.Субконто3 = Строка.Номенклатура; 
	КонецЕсли;
	
	СпособОтраженияНов.Записать();
	СпособОтражения = СпособОтраженияНов.Ссылка; 
	Строка.СпособОтраженияРасходов = СпособОтражения;
КонецЕсли;</Текст>
			<Параметры>Строка, Объект, СтатьяЗатрат, СчетЗатрат, ПодразделениеНазначения, НоменклатурнаяГруппа</Параметры>
		</Алгоритм>
		<Алгоритм Имя="ПровестиЗагруженныеДокументы" ИспользуетсяПриЗагрузке="true">
			<Текст>
Для каждого текСтрока из Параметры.ТаблицаПроведения Цикл
	
	// определяем тип, заполняем порядок
	Если типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ПоступлениеТоваровУслуг") Тогда
		текСтрока.Порядок = 10;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.АвансовыйОтчет") Тогда
		текСтрока.Порядок = 11;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ПеремещениеТоваров") Тогда
		текСтрока.Порядок = 20;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ПринятиеКУчетуОС") Тогда
		текСтрока.Порядок = 30;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ПеремещениеОС") Тогда
		текСтрока.Порядок = 40;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.СписаниеОС") Тогда
		текСтрока.Порядок = 50;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ТребованиеНакладная") Тогда
		текСтрока.Порядок = 60;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ПередачаМатериаловВЭксплуатацию") Тогда
		текСтрока.Порядок = 70;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ВозвратМатериаловИзЭксплуатации") Тогда
		текСтрока.Порядок = 80;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.СписаниеМатериаловИзЭксплуатации") Тогда
		текСтрока.Порядок = 90;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ИмпВнутреннееПеремещениеМатериаловВЭксплуатации") Тогда
		текСтрока.Порядок = 100;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.СписаниеТоваров") Тогда
		текСтрока.Порядок = 110;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ОприходованиеТоваров") Тогда
		текСтрока.Порядок = 120;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.КомплектацияНоменклатуры") Тогда
		текСтрока.Порядок = 130;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.РеализацияТоваровУслуг") Тогда
		текСтрока.Порядок = 140;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.ПоступлениеДопРасходов") Тогда
		текСтрока.Порядок = 160;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.СчетФактураВыданный") Тогда
		текСтрока.Порядок = 170;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.СчетФактураПолученный") Тогда
		текСтрока.Порядок = 180;
	ИначеЕсли типЗнч(текСтрока.Ссылка) = Тип("ДокументСсылка.игсДвижениеЗабалансовыхМТР") Тогда
		текСтрока.Порядок = 190;	
	КонецЕсли;
	
КонецЦикла;

Параметры.ТаблицаПроведения.Сортировать("Порядок Возр");

Для каждого текСтрока из Параметры.ТаблицаПроведения Цикл
	
	Если Не ЗначениеЗаполнено(текСтрока.Ссылка) Тогда
		Продолжить;
	КонецЕсли;
	
	текОбъект = текСтрока.Ссылка.ПолучитьОбъект();
	
	Попытка
		текОбъект.Записать(РежимЗаписиДокумента.Проведение);
	Исключение
		текОбъект.Записать(РежимЗаписиДокумента.Запись);
		СтрокаОшибки = Параметры.ТаблицаОшибок.Добавить();
		СтрокаОшибки.ТипОшибки				= "Проведение";
		СтрокаОшибки.ДокументИсточник		= текОбъект;
		СтрокаОшибки.ОписаниеОшибки			= ОписаниеОшибки();
	КонецПопытки;
	
КонецЦикла;</Текст>
		</Алгоритм>
		<Алгоритм Имя="СоздатьСчетФактурыАвансовогоОтчета" ИспользуетсяПриЗагрузке="true">
			<Текст>  // В данной таблице содержится информация о том, какие счета-фактуры уже были
				// выписаны ранее на основании данных документов
				// *** ПолучитьТаблицуПодчиненныхСчетовФактур
				Запрос = Новый Запрос;
				Запрос.УстановитьПараметр("ДокументОснование", Объект.Ссылка);
				
				ТаблицаСФ = Новый ТаблицаЗначений;
				ТаблицаСФ.Колонки.Добавить("Ссылка", Новый ОписаниеТипов("ДокументСсылка.СчетФактураПолученный"));
				ТаблицаСФ.Колонки.Добавить("НомерВходящегоДокумента", Новый ОписаниеТипов("Строка"));
				ТаблицаСФ.Колонки.Добавить("ДатаВходящегоДокумента", Новый ОписаниеТипов("Дата"));
				ТаблицаСФ.Колонки.Добавить("Поставщик", Новый ОписаниеТипов("СправочникСсылка.Контрагенты"));
				ТаблицаСФ.Колонки.Добавить("Проведен", Новый ОписаниеТипов("Булево"));
				ТаблицаСФ.Колонки.Добавить("ПометкаУдаления", Новый ОписаниеТипов("Булево"));
				
				Если ЗначениеЗаполнено(Объект.Ссылка) Тогда
					Запрос.Текст = 
					"ВЫБРАТЬ
					|	СчетФактураПолученный.Ссылка КАК Ссылка,
					|	СчетФактураПолученный.Ссылка.НомерВходящегоДокумента,
					|	СчетФактураПолученный.Ссылка.ДатаВходящегоДокумента,
					|	СчетФактураПолученный.Ссылка.Контрагент КАК Поставщик,
					|	СчетФактураПолученный.Ссылка.Проведен,
					|	СчетФактураПолученный.Ссылка.ПометкаУдаления КАК ПометкаУдаления
					|ИЗ
					|	Документ.СчетФактураПолученный.ДокументыОснования КАК СчетФактураПолученный
					|ГДЕ
					|	СчетФактураПолученный.ДокументОснование = &amp;ДокументОснование
					|
					|УПОРЯДОЧИТЬ ПО
					|	СчетФактураПолученный.Ссылка.Дата,
					|	ПометкаУдаления УБЫВ,
					|	Ссылка";
				
					ТаблицаСФ = Запрос.Выполнить().Выгрузить();
				
				КонецЕсли;
				
				//Возврат РезТаблица;
				// *** 
				ТаблицаСФ.Колонки.Добавить("Использован", Новый ОписаниеТипов("Булево"));
				// ***********************************************************************************
				
				// ***********************************************************************************
				СписокТабЧастей = Новый СписокЗначений;
				СписокТабЧастей.Добавить("Товары");
				
				
				Для Каждого ТабЧасть Из СписокТабЧастей Цикл
					ТаблицаДокумента = Новый ТаблицаЗначений;
					ТаблицаДокумента.Колонки.Добавить("Поставщик");
					ТаблицаДокумента.Колонки.Добавить("ДоговорКонтрагента");
					ТаблицаДокумента.Колонки.Добавить("ИГС_Продавец");
					ТаблицаДокумента.Колонки.Добавить("НомерСФ");
					ТаблицаДокумента.Колонки.Добавить("ДатаСФ");
					ТаблицаДокумента.Колонки.Добавить("СчетФактура");
					ТаблицаДокумента.Колонки.Добавить("СуммаБезНДС");
					ТаблицаДокумента.Колонки.Добавить("НДС");
					ТаблицаДокумента.Колонки.Добавить("БланкСтрогойОтчетности", Новый ОписаниеТипов("Булево"));
						
					// подготовим таблицу документа
					Для Каждого СтрокаДок Из Объект[ТабЧасть.Значение] Цикл
						Если НЕ СтрокаДок.ПредъявленСФ Тогда
							// СФ не предъявлен.
							Продолжить;
						КонецЕсли; 
						СтрокаТаблицыДок = ТаблицаДокумента.Добавить();
						СтрокаТаблицыДок.Поставщик	= СтрокаДок.Поставщик;
						СтрокаТаблицыДок.НомерСФ	= СокрЛП(СтрокаДок.НомерСФ);
						СтрокаТаблицыДок.ДатаСФ		= СтрокаДок.ДатаСФ;
						СтрокаТаблицыДок.СчетФактура= СтрокаДок.СчетФактура;
								
						СтрокаТаблицыДок.СуммаБезНДС= СтрокаДок.Сумма - ?(Объект.СуммаВключаетНДС,СтрокаДок.СуммаНДС,0);
						СтрокаТаблицыДок.НДС		= СтрокаДок.СуммаНДС;
										        			
					КонецЦикла;
						
					// В данной таблице содержится информация о том, какие счета-фактуры необходимо выписать
					ТаблицаДокумента.Свернуть("Поставщик, ДоговорКонтрагента, ИГС_Продавец, НомерСФ,ДатаСФ,СчетФактура,БланкСтрогойОтчетности", "СуммаБезНДС, НДС");
						
					Для Каждого СтрокаТаблицыДок Из ТаблицаДокумента Цикл
						Если НЕ ЗначениеЗаполнено(СтрокаТаблицыДок.Поставщик)
						 или (ПустаяСтрока(СтрокаТаблицыДок.НомерСФ)) Тогда
						    // В строке авансового отчета не указаны параметры для создания счета-фактуры
							Продолжить;
						КонецЕсли;
						
						// Поиск существующего документа счет-фактура полученный
						// **********************************************************************
						//ДокСФ = НайтиСчетФактуруВСписке(ТаблицаСФ, СтрокаТаблицыДок);
						ДокСФ = Неопределено;
						СтрокаДокумента = СтрокаТаблицыДок;
						УстановитьПризнакИспользования = Истина;
						Если ЗначениеЗаполнено(СтрокаДокумента.СчетФактура)
							и не ТаблицаСФ.Найти(СтрокаДокумента.СчетФактура,"Ссылка") = неопределено Тогда
						    СтрокаСФ = ТаблицаСФ.Найти(СтрокаДокумента.СчетФактура,"Ссылка");
							
							Если (Врег(СокрЛП(СтрокаСФ.НомерВходящегоДокумента)) = Врег(СокрЛП(СтрокаДокумента.НомерСФ)))
							   и (СтрокаСФ.Поставщик = СтрокаДокумента.Поставщик или НЕ ЗначениеЗаполнено(СтрокаСФ.Поставщик)) Тогда
								// найден подходящий счет-фактура
								ДокСФ = СтрокаСФ.Ссылка.ПолучитьОбъект();
								Если ТаблицаСФ.Колонки.Найти("Использован") &lt;&gt; Неопределено и УстановитьПризнакИспользования Тогда
									СтрокаСФ.Использован = Истина;
								КонецЕсли;
								//Возврат ДокСФ;
								Прервать;
							КонецЕсли;
						КонецЕсли; 
									
						Для Каждого СтрокаСФ Из ТаблицаСФ Цикл
							// Поиск существующего счета-фактуры выполняется по его номеру дате и контрагенту.
							Если (Врег(СокрЛП(СтрокаСФ.НомерВходящегоДокумента)) = Врег(СокрЛП(СтрокаДокумента.НомерСФ)))
							   и (СтрокаСФ.Поставщик = СтрокаДокумента.Поставщик или НЕ ЗначениеЗаполнено(СтрокаСФ.Поставщик)) Тогда
								// найден подходящий счет-фактура
								ДокСФ = СтрокаСФ.Ссылка.ПолучитьОбъект();
								Если ТаблицаСФ.Колонки.Найти("Использован") &lt;&gt; Неопределено и УстановитьПризнакИспользования Тогда
									СтрокаСФ.Использован = Истина;
								КонецЕсли;
								
								Прервать;
								
							КонецЕсли;
							
						КонецЦикла;
						
						//Возврат ДокСФ;
						// **********************************************************************
						
						Если ДокСФ = Неопределено Тогда
							// Если существующий счет-фактура не найден, нужно создать новый счет-фактуру
							ДокСФ = Документы.СчетФактураПолученный.СоздатьДокумент();
							
							ДокСФ.ДокументыОснования.Добавить().ДокументОснование = Объект.Ссылка;
							
							ДокСФ.Дата = Объект.Дата;
							ДокСФ.Организация = Объект.Организация;
							ДокСФ.Контрагент = СтрокаТаблицыДок.Поставщик;
							ДокСФ.ДоговорКонтрагента = СтрокаТаблицыДок.ДоговорКонтрагента;
							ДокСФ.Продавец = СтрокаТаблицыДок.ИГС_Продавец;
							
							ДокСФ.ДатаВходящегоДокумента = СтрокаТаблицыДок.ДатаСФ;
							ДокСФ.НомерВходящегоДокумента = СтрокаТаблицыДок.НомерСФ;
							ДокСФ.ВидСчетаФактуры = Перечисления.ВидСчетаФактурыПолученного.НаПоступление;
							
							ДокСФ.БланкСтрогойОтчетности = СтрокаТаблицыДок.БланкСтрогойОтчетности;
												
							ДокСФ.Ответственный = Объект.Ответственный;
							
							ДокСФ.Комментарий = "Создан автоматически на основании авансового отчета";
			
							ДокСФ.Записать(?(Объект.Проведен, РежимЗаписиДокумента.Проведение, РежимЗаписиДокумента.Запись));
			
			  
							СтрокаПроведения = Параметры.ТаблицаПроведения.Добавить();
							СтрокаПроведения.Ссылка = ДокСФ.Ссылка;
							
							Сообщить("Сформирован документ «"+СокрЛП(ДокСФ.Ссылка)+"» (поставщик «"+СокрЛП(СтрокаТаблицыДок.Поставщик)+"», с.-ф. № "+СокрЛП(СтрокаТаблицыДок.НомерСФ)+" от "+Формат(СтрокаТаблицыДок.ДатаСФ, "ДФ=dd.MM.yyyy") +")."); 
							
							// Этот новый счет-фактуру нужно зафиксировать в таблице счетов-фактур
							СтрокаСФ = ТаблицаСФ.Добавить();
							СтрокаСФ.Поставщик = СтрокаТаблицыДок.Поставщик;
							СтрокаСФ.НомерВходящегоДокумента = ДокСФ.НомерВходящегоДокумента;
							СтрокаСФ.ДатаВходящегоДокумента = ДокСФ.ДатаВходящегоДокумента;
							СтрокаСФ.Ссылка = ДокСФ.Ссылка;
							СтрокаСФ.Использован = Истина;
							
						Иначе
							// Информацию об этом счете-фактуре нужно обновить в таблице счетов-фактур
							СтрокаСФ = ТаблицаСФ.Найти(ДокСФ.Ссылка, "Ссылка");
							Если ДокСФ.ДокументыОснования.Найти(Объект.Ссылка,"ДокументОснование") = Неопределено Тогда
								ДокСФ.ДокументыОснования.Добавить().ДокументОснование = Объект.Ссылка;
							КонецЕсли; 
							
						КонецЕсли;
						
						ДокСФ.ДоговорКонтрагента = СтрокаТаблицыДок.ДоговорКонтрагента;
						ДокСФ.ИГСПродавец = СтрокаТаблицыДок.ИГС_Продавец;
						
						Если ДокСФ.БланкСтрогойОтчетности &lt;&gt; СтрокаТаблицыДок.БланкСтрогойОтчетности Тогда
							ДокСФ.БланкСтрогойОтчетности = СтрокаТаблицыДок.БланкСтрогойОтчетности;
						КонецЕсли; 
						
						Если УчетНДС.ПолучитьВерсиюПостановления(Объект.Дата) = 2
						//	И ПустаяСтрока(ДокСФ.КодВидаОперации) 
							И НЕ ДокСФ.БланкСтрогойОтчетности Тогда
							ДокСФ.КодВидаОперации     = "23";
							ДокСФ.КодСпособаПолучения = 1;
						КонецЕсли;
						
						Если ДокСФ.ПометкаУдаления Тогда
							ДокСФ.ПометкаУдаления = Ложь;
						КонецЕсли; 
						
						Если ДокСФ.Модифицированность() Тогда
							ДокСФ.Заблокировать();
							Попытка
								ДокСФ.Записать(?(Объект.Проведен, РежимЗаписиДокумента.Проведение, РежимЗаписиДокумента.Запись));
								СтрокаПроведения = Параметры.ТаблицаПроведения.Добавить();
								СтрокаПроведения.Ссылка = ДокСФ.Ссылка;
							Исключение
							 	ДокСф.Проведен = Ложь;
								ДокСФ.Записать(РежимЗаписиДокумента.Запись);
							КонецПопытки;
						КонецЕсли; 
						
					КонецЦикла;
				
					// далее необходимо прописать ссылки на созданные счета-фактуры на аванс в строки документа
					Для Каждого СтрокаДок Из Объект[ТабЧасть.Значение] Цикл
						
						Если не СтрокаДок.ПредъявленСФ тогда
							// Для строки не нужен счет-фактура
							Если ЗначениеЗаполнено(СтрокаДок.СчетФактура) Тогда
								СтрокаДок.СчетФактура = Неопределено;
							КонецЕсли; 
							Продолжить;
						КонецЕсли;
						
						// **********************************************************************
						ДокСФ = Неопределено;
						СтрокаДокумента = СтрокаДок;
						УстановитьПризнакИспользования = Ложь;
						Если ЗначениеЗаполнено(СтрокаДокумента.СчетФактура)
							и не ТаблицаСФ.Найти(СтрокаДокумента.СчетФактура,"Ссылка") = неопределено Тогда
						    СтрокаСФ = ТаблицаСФ.Найти(СтрокаДокумента.СчетФактура,"Ссылка");
							
							Если (Врег(СокрЛП(СтрокаСФ.НомерВходящегоДокумента)) = Врег(СокрЛП(СтрокаДокумента.НомерСФ)))
							   и (СтрокаСФ.Поставщик = СтрокаДокумента.Поставщик или НЕ ЗначениеЗаполнено(СтрокаСФ.Поставщик)) Тогда
								// найден подходящий счет-фактура
								ДокСФ = СтрокаСФ.Ссылка.ПолучитьОбъект();
								Если ТаблицаСФ.Колонки.Найти("Использован") &lt;&gt; Неопределено и УстановитьПризнакИспользования Тогда
									СтрокаСФ.Использован = Истина;
								КонецЕсли;
								//Возврат ДокСФ;
								Прервать;
							КонецЕсли;
						КонецЕсли; 
									
						Для Каждого СтрокаСФ Из ТаблицаСФ Цикл
							// Поиск существующего счета-фактуры выполняется по его номеру дате и контрагенту.
							Если (Врег(СокрЛП(СтрокаСФ.НомерВходящегоДокумента)) = Врег(СокрЛП(СтрокаДокумента.НомерСФ)))
							   и (СтрокаСФ.Поставщик = СтрокаДокумента.Поставщик или НЕ ЗначениеЗаполнено(СтрокаСФ.Поставщик)) Тогда
								// найден подходящий счет-фактура
								ДокСФ = СтрокаСФ.Ссылка.ПолучитьОбъект();
								Если ТаблицаСФ.Колонки.Найти("Использован") &lt;&gt; Неопределено и УстановитьПризнакИспользования Тогда
									СтрокаСФ.Использован = Истина;
								КонецЕсли;
								
								Прервать;
								
							КонецЕсли;
							
						КонецЦикла;
						
						//Возврат ДокСФ;
						// **********************************************************************
						
						// **********************************************************************
						Если ДокСФ &lt;&gt; Неопределено Тогда
							// Если есть счет-фактура - регистрируем его в строке табличной части
							Если не СтрокаДок.СчетФактура = ДокСФ.Ссылка Тогда
								Если ЗначениеЗаполнено(СтрокаДок.СчетФактура) Тогда
									Сообщить("Изменен счет-фактура по строке "+СтрокаДок.НомерСтроки+" """+ТабЧасть.Значение+""" (дата, номер входящего счета-фактуры или контрагент - изменены).",СтатусСообщения.Информация); 
								КонецЕсли; 
								СтрокаДок.СчетФактура = ДокСФ.Ссылка;
							КонецЕсли; 
						Иначе
							Если НЕ ЗначениеЗаполнено(СтрокаДок.Поставщик)
							 или ПустаяСтрока(СтрокаДок.НомерСФ) 
							 Тогда
								Сообщить("В строке "+СтрокаДок.НомерСтроки+" """+ТабЧасть.Значение+""" "+
								?(НЕ ЗначениеЗаполнено(СтрокаДок.Поставщик),"не указан поставщик, ","")+
								?(ПустаяСтрока(СтрокаДок.НомерСФ),"не указан номер счета-фактуры, ","")+
								" счет-фактура по строке не зарегистрирован!",СтатусСообщения.Важное);
							КонецЕсли;
								
							// Для строки не создан счет-фактура
							СтрокаДок.СчетФактура = Неопределено;
						КонецЕсли;
					КонецЦикла;
				
				КонецЦикла;</Текст>
		</Алгоритм>
	</Алгоритмы>
	<Запросы/>
</ПравилаОбмена>